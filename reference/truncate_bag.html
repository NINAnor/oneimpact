<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Truncate bag to avoid weirdness in the model — truncate_bag • oneimpact</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Truncate bag to avoid weirdness in the model — truncate_bag"><meta name="description" content="This function identifies sources of weirdness in the models in a bag and
uses them to remove variables the produce such weirdness. Sources of
weirdness might be coefficients with signs opposite to one's hypothesis,
response curves crossing zero, or response curves with multiple inflection
points, for instance."><meta property="og:description" content="This function identifies sources of weirdness in the models in a bag and
uses them to remove variables the produce such weirdness. Sources of
weirdness might be coefficients with signs opposite to one's hypothesis,
response curves crossing zero, or response curves with multiple inflection
points, for instance."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oneimpact</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/oneimpact.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/oneimpact.html">Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/computing_zoi.html">Computing zones of influence</a></li>
    <li><a class="dropdown-item" href="../articles/zoi_on_grass.html">Zones of influence on GRASS GIS</a></li>
    <li><a class="dropdown-item" href="../articles/fitting_ZOI_logit.html">Estimating zones of influence using penalized regression</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NINAnor/oneimpact/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Truncate bag to avoid weirdness in the model</h1>
      <small class="dont-index">Source: <a href="https://github.com/NINAnor/oneimpact/blob/main/R/truncate_bag.R" class="external-link"><code>R/truncate_bag.R</code></a></small>
      <div class="d-none name"><code>truncate_bag.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function identifies sources of weirdness in the models in a bag and
uses them to remove variables the produce such weirdness. Sources of
weirdness might be coefficients with signs opposite to one's hypothesis,
response curves crossing zero, or response curves with multiple inflection
points, for instance.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">truncate_bag</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  measure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"coef_sign"</span>, <span class="st">"cross"</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>  criterion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"min"</span>, <span class="st">"first_coef"</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>  wmean <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  expected_sign <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,</span>
<span>  reassess <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Bag.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p><code>[data.frame]</code> <br> The original, complete data used for model fitting.</p></dd>


<dt id="arg-measure">measure<a class="anchor" aria-label="anchor" href="#arg-measure"></a></dt>
<dd><p><code>[character(1)="cross"]{"coef_sign", "cross"}</code> <br> Measure used
to quantify "weirdness" in the model or coefficients, based on the coefficients and
the response plots for each type of covariate with zone of influence in a model.
It can be one of these:</p><ul><li><p><code>"coef_sign"</code>: The measure is based on the minimum ZOI radius for which the
sign is opposite to the ecologically expected sign;</p></li>
<li><p><code>"cross"</code>: default. The measure is based on the minimum distance at which a
reponse curve crosses zero.</p></li>
</ul></dd>


<dt id="arg-criterion">criterion<a class="anchor" aria-label="anchor" href="#arg-criterion"></a></dt>
<dd><p><code>[character(1)="first_coef"]{"min", "first_coef"}</code> <br> Criterion
used to truncate the curves/coefficients, for each type of ZOI variable.
Only applicable for <code>measure = "cross"</code>.
If <code>criterion = "first_coef"</code> (default), the coefficients are set to zero
starting from the first coefficient whose sign is opposite to the expected sign,
which is larger than the distance at which the response plot crosses zero
for that ZOI variable.
If <code>criterion = "min"</code>, the coefficients are set to zero for all terms whose
radius is larger than the distance at which the response plot crosses zero
for that ZOI variable (regardless of the coefficient signs).</p></dd>


<dt id="arg-wmean">wmean<a class="anchor" aria-label="anchor" href="#arg-wmean"></a></dt>
<dd><p><code>[logical(1)=TRUE]</code> <br> Whether the truncation should be based on the weighted mean
coefficients and response plots (default, if <code>wmean = TRUE</code>) or on each individual
model coefficient and response plots (if <code>wmean = FALSE</code>).</p></dd>


<dt id="arg-expected-sign">expected_sign<a class="anchor" aria-label="anchor" href="#arg-expected-sign"></a></dt>
<dd><p><code>[numeric(1)=-1]</code> <br> Expected sign of the coefficient. Either -1 (negative),
+1 (positive), or 0 (no effect).</p></dd>


<dt id="arg-reassess">reassess<a class="anchor" aria-label="anchor" href="#arg-reassess"></a></dt>
<dd><p><code>[logical(1)=TRUE]</code> <br> Should the model be reassessed after
truncation, with fit, calibration, and validation scores re-computed?
Default is <code>TRUE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p><br> Other parameters used in <code><a href="weirdness.html">weirdness()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Currently, this function is applied only to terms corresponding to zones
of influence (ZOI). Importantly, this function does not re-fit the
model, but only sets coefficients to zero for all ZOI terms above the
radius in which a certain weirdness is identified.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="weirdness.html">weirdness()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#-------</span></span></span>
<span class="r-in"><span><span class="co"># fit a bag</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#---</span></span></span>
<span class="r-in"><span><span class="co"># fit a bag to be tested</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load packages</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://glmnet.stanford.edu" class="external-link">glmnet</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"reindeer_rsf"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># rename it just for convenience</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">reindeer_rsf</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># formula initial structure</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="va">use</span> <span class="op">~</span> <span class="va">private_cabins_cumulative_XXX</span> <span class="op">+</span> <span class="va">public_cabins_high_cumulative_XXX</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="va">trails_cumulative_XXX</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="va">NORUTreclass</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="co"># poly(norway_pca_klima_axis1, 2, raw = TRUE) +</span></span></span>
<span class="r-in"><span>  <span class="co"># poly(norway_pca_klima_axis2, 2, raw = TRUE) +</span></span></span>
<span class="r-in"><span>  <span class="va">norway_pca_klima_axis1</span> <span class="op">+</span> <span class="va">norway_pca_klima_axis1_sq</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="va">norway_pca_klima_axis2</span> <span class="op">+</span> <span class="va">norway_pca_klima_axis2_sq</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="va">norway_pca_klima_axis3</span> <span class="op">+</span> <span class="va">norway_pca_klima_axis4</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add ZOI terms to the formula</span></span></span>
<span class="r-in"><span><span class="va">zois</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">250</span>, <span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">2500</span>, <span class="fl">5000</span>, <span class="fl">10000</span>, <span class="fl">20000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ff</span> <span class="op">&lt;-</span> <span class="fu"><a href="add_zoi_formula.html">add_zoi_formula</a></span><span class="op">(</span><span class="va">f</span>, zoi_radius <span class="op">=</span> <span class="va">zois</span>, pattern <span class="op">=</span> <span class="st">"XXX"</span>,</span></span>
<span class="r-in"><span>                      cumulative <span class="op">=</span> <span class="st">""</span>,</span></span>
<span class="r-in"><span>                      type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exp_decay"</span><span class="op">)</span>,<span class="co">#, "nearest_exp_decay"),</span></span></span>
<span class="r-in"><span>                      separator <span class="op">=</span> <span class="st">""</span>, predictor_table <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="va">ff</span><span class="op">$</span><span class="va">formula</span></span></span>
<span class="r-in"><span><span class="va">pred_table</span> <span class="op">&lt;-</span> <span class="va">ff</span><span class="op">$</span><span class="va">predictor_table</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sampling - random sampling</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1234</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">samples</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_resamples.html">create_resamples</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">use</span>,</span></span>
<span class="r-in"><span>                            p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            times <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>                            colH0 <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Starting random sampling..."</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># fit multiple models</span></span></span>
<span class="r-in"><span><span class="va">fittedl</span> <span class="op">&lt;-</span> <span class="fu"><a href="bag_fit_net_functions.html">bag_fit_net_logit</a></span><span class="op">(</span><span class="va">f</span>,</span></span>
<span class="r-in"><span>                             data <span class="op">=</span> <span class="va">dat</span>,</span></span>
<span class="r-in"><span>                             samples <span class="op">=</span> <span class="va">samples</span>,</span></span>
<span class="r-in"><span>                             standardize <span class="op">=</span> <span class="st">"internal"</span>, <span class="co"># glmnet does the standardization of covariates</span></span></span>
<span class="r-in"><span>                             metric <span class="op">=</span> <span class="st">"AUC"</span>,</span></span>
<span class="r-in"><span>                             method <span class="op">=</span> <span class="st">"AdaptiveLasso"</span>,</span></span>
<span class="r-in"><span>                             predictor_table <span class="op">=</span> <span class="va">pred_table</span>,</span></span>
<span class="r-in"><span>                             parallel <span class="op">=</span> <span class="st">"mclapply"</span>,</span></span>
<span class="r-in"><span>                             mc.cores <span class="op">=</span> <span class="fl">8</span><span class="op">)</span> <span class="co">#2)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># bag models in a single object</span></span></span>
<span class="r-in"><span><span class="va">bag_object</span> <span class="op">&lt;-</span> <span class="fu"><a href="bag_models.html">bag_models</a></span><span class="op">(</span><span class="va">fittedl</span>, <span class="va">dat</span>, score_threshold <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#---------</span></span></span>
<span class="r-in"><span><span class="co"># truncate model</span></span></span>
<span class="r-in"><span><span class="va">bag_object_trunc</span> <span class="op">&lt;-</span> <span class="fu">truncate_bag</span><span class="op">(</span><span class="va">bag_object</span>,</span></span>
<span class="r-in"><span>                             data <span class="op">=</span> <span class="va">dat</span>,</span></span>
<span class="r-in"><span>                             measure <span class="op">=</span> <span class="st">"cross"</span>,</span></span>
<span class="r-in"><span>                             criterion <span class="op">=</span> <span class="st">"first_coef"</span>,</span></span>
<span class="r-in"><span>                             wmean <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compare validation scores</span></span></span>
<span class="r-in"><span><span class="va">bag_object</span><span class="op">$</span><span class="va">validation_score</span> <span class="op">-</span> <span class="va">bag_object_trunc</span><span class="op">$</span><span class="va">validation_score</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       Resample01 Resample02  Resample03  Resample04  Resample05 Resample06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.007829143 0.00769509 0.007095713 0.007645018 0.002315486 0.00809448</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Resample07  Resample08 Resample09 Resample10 Resample11  Resample12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]          0 0.008433258 0.06171586 0.06536645 0.01087375 0.005039923</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Resample13  Resample14  Resample15  Resample16 Resample17  Resample18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.01162653 0.008363931 0.007077678 0.005159021 0.01709546 0.009585591</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Resample19  Resample20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.01237743 0.008092633</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bag_object</span><span class="op">$</span><span class="va">weighted_validation_score</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      weighted_validation_score</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]                  0.922617</span>
<span class="r-in"><span><span class="va">bag_object_trunc</span><span class="op">$</span><span class="va">weighted_validation_score</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      weighted_validation_score</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]                 0.9102619</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot curves to check weirdness</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ZOI public cabins cumulative</span></span></span>
<span class="r-in"><span><span class="va">dfvar</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>trails_cumulative <span class="op">=</span> <span class="fl">1e3</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">20</span>, length.out <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># look into curve</span></span></span>
<span class="r-in"><span><span class="co"># plot_response(bag_object,</span></span></span>
<span class="r-in"><span><span class="co">#               dfvar = dfvar,</span></span></span>
<span class="r-in"><span><span class="co">#               data = dat,</span></span></span>
<span class="r-in"><span><span class="co">#               type = "linear", zoi = TRUE,</span></span></span>
<span class="r-in"><span><span class="co">#               type_feature =  "line",</span></span></span>
<span class="r-in"><span><span class="co">#               type_feature_recompute = TRUE,</span></span></span>
<span class="r-in"><span><span class="co">#               resolution = 300,</span></span></span>
<span class="r-in"><span><span class="co">#               ci = FALSE, indiv_pred = TRUE)</span></span></span>
<span class="r-in"><span><span class="co"># original plot</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot_response.html">plot_response</a></span><span class="op">(</span><span class="va">bag_object</span>,</span></span>
<span class="r-in"><span>              dfvar <span class="op">=</span> <span class="va">dfvar</span>,</span></span>
<span class="r-in"><span>              data <span class="op">=</span> <span class="va">dat</span>,</span></span>
<span class="r-in"><span>              type <span class="op">=</span> <span class="st">"linear"</span>, zoi <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>              ci <span class="op">=</span> <span class="cn">FALSE</span>, indiv_pred <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="truncate_bag-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># truncated plot</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot_response.html">plot_response</a></span><span class="op">(</span><span class="va">bag_object_trunc</span>,</span></span>
<span class="r-in"><span>              dfvar <span class="op">=</span> <span class="va">dfvar</span>,</span></span>
<span class="r-in"><span>              data <span class="op">=</span> <span class="va">dat</span>,</span></span>
<span class="r-in"><span>              type <span class="op">=</span> <span class="st">"linear"</span>, zoi <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>              <span class="co"># type_feature =  "line",</span></span></span>
<span class="r-in"><span>              <span class="co"># type_feature_recompute = TRUE,</span></span></span>
<span class="r-in"><span>              <span class="co"># resolution = 300,</span></span></span>
<span class="r-in"><span>              ci <span class="op">=</span> <span class="cn">FALSE</span>, indiv_pred <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="truncate_bag-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check weirdness</span></span></span>
<span class="r-in"><span><span class="fu"><a href="weirdness.html">weirdness</a></span><span class="op">(</span><span class="va">bag_object_trunc</span>, <span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $n_coefs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $n_resamples</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_index</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_index$private_cabins_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_index$private_cabins_cumulative_[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5 7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_index$public_cabins_high_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_index$public_cabins_high_cumulative_[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_index$trails_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_index$trails_cumulative_[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_names</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_names$private_cabins_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_names$private_cabins_cumulative_[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "private_cabins_cumulative_exp_decay2500" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2] "private_cabins_cumulative_exp_decay10000"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_names$public_cabins_high_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_names$public_cabins_high_cumulative_[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "public_cabins_high_cumulative_exp_decay10000"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_names$trails_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_names$trails_cumulative_[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_radii</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_radii$private_cabins_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_radii$private_cabins_cumulative_[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  2500 10000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_radii$public_cabins_high_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_radii$public_cabins_high_cumulative_[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_radii$trails_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_radii$trails_cumulative_[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> numeric(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_value$private_cabins_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_value$private_cabins_cumulative_[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.077101490 0.005901955</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_value$public_cabins_high_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_value$public_cabins_high_cumulative_[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3.081518</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_value$trails_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_value$trails_cumulative_[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> numeric(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     private_cabins_cumulative_ public_cabins_high_cumulative_ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              2                              1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             trails_cumulative_ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $coef_sign_sum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $cross_index</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $cross_index$private_cabins_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $cross_index$public_cabins_high_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $cross_index$trails_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $where_crosses</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $where_crosses$private_cabins_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> list()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $where_crosses$public_cabins_high_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> list()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $where_crosses$trails_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> list()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $n_crosses</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     private_cabins_cumulative_ public_cabins_high_cumulative_ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0                              0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             trails_cumulative_ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $n_crosses_total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $response_area_opposite</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     private_cabins_cumulative_ public_cabins_high_cumulative_ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0                              0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             trails_cumulative_ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $response_area_opposite_total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $response_area_ratio</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     private_cabins_cumulative_ public_cabins_high_cumulative_ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0                              0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             trails_cumulative_ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $response_area_ratio_total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $n_inflection</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     private_cabins_cumulative_ public_cabins_high_cumulative_ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0                              0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             trails_cumulative_ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $n_inflection_total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $difference_inflection</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     private_cabins_cumulative_ public_cabins_high_cumulative_ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0                              0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             trails_cumulative_ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $difference_inflection_total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bernardo Brandão Niebuhr, Manuela Panzacchi, Bram van Moorter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

