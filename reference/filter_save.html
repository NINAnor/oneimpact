<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Save kernel/filter matrix to use outside R — filter_save • oneimpact</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Save kernel/filter matrix to use outside R — filter_save"><meta name="description" content="This function saves a matrix with weights (filter or kernel matrix) in an external text file.
It can save either the raw matrix
or use the standards for running r.mfilter within GRASS GIS
(with specific header and details)."><meta property="og:description" content="This function saves a matrix with weights (filter or kernel matrix) in an external text file.
It can save either the raw matrix
or use the standards for running r.mfilter within GRASS GIS
(with specific header and details)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oneimpact</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/oneimpact.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/oneimpact.html">Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/computing_zoi.html">Computing zones of influence</a></li>
    <li><a class="dropdown-item" href="../articles/zoi_on_grass.html">Zones of influence on GRASS GIS</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NINAnor/oneimpact/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Save kernel/filter matrix to use outside R</h1>
      <small class="dont-index">Source: <a href="https://github.com/NINAnor/oneimpact/blob/main/R/filter_save.R" class="external-link"><code>R/filter_save.R</code></a></small>
      <div class="d-none name"><code>filter_save.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function saves a matrix with weights (filter or kernel matrix) in an external text file.
It can save either the raw matrix
or use the standards for running <code>r.mfilter</code> within GRASS GIS
(with specific header and details).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">filter_save</span><span class="op">(</span></span>
<span>  <span class="va">filt</span>,</span>
<span>  <span class="va">radius</span>,</span>
<span>  <span class="va">type</span>,</span>
<span>  save_format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GRASS_rmfilter"</span>, <span class="st">"raw"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  save_folder <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  divisor <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  normalize <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  separator <span class="op">=</span> <span class="st">" "</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-filt">filt<a class="anchor" aria-label="anchor" href="#arg-filt"></a></dt>
<dd><p><code>[matrix]</code> <br> Filter or weight matrix, such as one created by
<code><a href="filter_create.html">filter_create()</a></code> or <code><a href="https://rspatial.github.io/terra/reference/focalMat.html" class="external-link">terra::focalMat()</a></code>.</p></dd>


<dt id="arg-radius">radius<a class="anchor" aria-label="anchor" href="#arg-radius"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> Radius of the Zone of Influence (ZoI) of
the matrix, in meters.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p><code>[character(1)]</code> Function for the kernel or filter matrix
(see <code>type</code> parameter for <code><a href="filter_create.html">filter_create()</a></code>).</p></dd>


<dt id="arg-save-format">save_format<a class="anchor" aria-label="anchor" href="#arg-save-format"></a></dt>
<dd><p><code>[character(1)="GRASS_rmfilter"]{"GRASS_rmfilter", "raw"}</code> <br>
Format in which the function should be saved. Currently, either of the two options:</p><ul><li><p>GRASS GIS format for the module <code>r.mfilter</code>
(<code>save_format = "GRASS_rmfilter"</code>), see details <a href="https://grass.osgeo.org/grass78/manuals/r.mfilter.html" class="external-link">here</a>);</p></li>
<li><p>raw matrix (<code>save_format = "raw"</code>), in which only the values of the matrix are printed.</p></li>
</ul></dd>


<dt id="arg-save-folder">save_folder<a class="anchor" aria-label="anchor" href="#arg-save-folder"></a></dt>
<dd><p><code>[character(1)=NULL]</code> <br> Path to the folder where the matrix file should be written.
If <code>NULL</code>, the current working directory is used.</p></dd>


<dt id="arg-save-file">save_file<a class="anchor" aria-label="anchor" href="#arg-save-file"></a></dt>
<dd><p><code>[character(1)=NULL]</code> <br> Name of the output file, generally a ".txt" file.
If <code>NULL</code>, a standard filename is created, using the <code>type</code> and <code>radius</code>. E.g. "filter_bartlett2000.txt".</p></dd>


<dt id="arg-divisor">divisor<a class="anchor" aria-label="anchor" href="#arg-divisor"></a></dt>
<dd><p><code>[numeric(1)=1]</code> <br> By default, 1. This is the divisor of the neighborhood
matrix when used within <code>r.mfilter</code>. According the the module documentation, "The filter process produces a new
category value for each cell in the input raster map layer by multiplying the category values of the cells
in the n x n neighborhood around the center cell by the corresponding matrix value and adding them together.
If a divisor is specified, the sum is divided by this divisor." <br>
If the divisor is zero, "then the divisor is computed for each cell as the sum of the MATRIX values where
the corresponding input cell is non-null." In other words, the output map will be rescaled to the
interval 0,1. If <code>normalize = TRUE</code>, the divisor is set to <code>n*n</code>.</p></dd>


<dt id="arg-normalize">normalize<a class="anchor" aria-label="anchor" href="#arg-normalize"></a></dt>
<dd><p><code>[logical(1)=FALSE]</code> <br> Whether the matrix should be normalized (sum of all cells is 1 if
<code>normalize = TRUE</code>) or kept as it is (default, <code>normalize = FALSE</code>).</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p><code>[logical(1)=TRUE]</code> <br> Whether the computation should be paralelized or not (details in
the documentation of the <a href="https://grass.osgeo.org/grass78/manuals/r.mfilter.html" class="external-link"><code>r.mfilter</code></a> module).</p></dd>


<dt id="arg-separator">separator<a class="anchor" aria-label="anchor" href="#arg-separator"></a></dt>
<dd><p><code>[character(1)=" "]</code> <br> Separator between values of the matrix, within each line. Default is
a space.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>None. The funcion only saves the input matrix as an external file.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If used in the <code>r.mfilter</code> GRASS GIS module, "The filter process produces a new category value
for each cell in the input raster map layer by multiplying the category values of the cells in the n x n
neighborhood around the center cell by the corresponding matrix value and adding them together.
If a divisor is specified, the sum is divided by this divisor." See details
<a href="https://grass.osgeo.org/grass78/manuals/r.mfilter.html" class="external-link">here</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>GRASS module <a href="https://grass.osgeo.org/grass78/manuals/r.mfilter.html" class="external-link">r.mfilter</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">my_filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="filter_create.html">filter_create</a></span><span class="op">(</span>r <span class="op">=</span> <span class="fl">100</span>, type <span class="op">=</span> <span class="st">"bartlett"</span>, radius <span class="op">=</span> <span class="fl">1000</span>, round <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">filter_save</span><span class="op">(</span><span class="va">my_filter</span>, radius <span class="op">=</span> <span class="fl">1000</span>, type <span class="op">=</span> <span class="st">"bartlett"</span>, save_format <span class="op">=</span> <span class="st">"GRASS_rmfilter"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">filter_save</span><span class="op">(</span><span class="va">my_filter</span>, radius <span class="op">=</span> <span class="fl">1000</span>, type <span class="op">=</span> <span class="st">"bartlett"</span>, save_format <span class="op">=</span> <span class="st">"raw"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bernardo Brandão Niebuhr, Manuela Panzacchi, Bram van Moorter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

