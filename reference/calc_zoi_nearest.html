<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate the zone of influence from the nearest feature — calc_zoi_nearest • oneimpact</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate the zone of influence from the nearest feature — calc_zoi_nearest"><meta name="description" content="This function takes in a raster with locations or counts of
infrastructure and calculates a raster (or set of rasters, in case there is
more the one value for radius) representing the zone of influence (ZOI)
from the neareast feature of that type of infrastructure. Zones of influence
are defined by functions that decay with the distance from each
infrastructure and their rate of decay is controlled by the ZOI radius
(radius), which defines how far the influence of an infrastructure
feature goes. By default, the Gaussian decay ZOI is calculated, but other
decay shapes might be used (see zoi_functions() for examples).
The function might also return the distance to the nearest feature
or a transformation from it (e.g. log- and sqrt-distance from the nearest
feature).
The procedure might be computed in both R and GRASS GIS. In GRASS, it
requires an active connection between the R session and a GRASS GIS
location and mapset (through the package rgrass), and that the input
maps are already loaded within this GRASS GIS mapset.
If the calculations are done in R, the input is a (set of) raster map(s)
and the function returns another (set of) raster map(s). If the calculations
are done within GRASS GIS, the input is the name of a raster map already
loaded in a GRASS GIS location and mapset, and the function returns
only the name of the output map. This map is stored in the GRASS GIS
location/mapset, and might be retrieved to R through the
rgrass::read_RAST() function or exported outside GRASS using the
r.out.gdal module, for instance."><meta property="og:description" content="This function takes in a raster with locations or counts of
infrastructure and calculates a raster (or set of rasters, in case there is
more the one value for radius) representing the zone of influence (ZOI)
from the neareast feature of that type of infrastructure. Zones of influence
are defined by functions that decay with the distance from each
infrastructure and their rate of decay is controlled by the ZOI radius
(radius), which defines how far the influence of an infrastructure
feature goes. By default, the Gaussian decay ZOI is calculated, but other
decay shapes might be used (see zoi_functions() for examples).
The function might also return the distance to the nearest feature
or a transformation from it (e.g. log- and sqrt-distance from the nearest
feature).
The procedure might be computed in both R and GRASS GIS. In GRASS, it
requires an active connection between the R session and a GRASS GIS
location and mapset (through the package rgrass), and that the input
maps are already loaded within this GRASS GIS mapset.
If the calculations are done in R, the input is a (set of) raster map(s)
and the function returns another (set of) raster map(s). If the calculations
are done within GRASS GIS, the input is the name of a raster map already
loaded in a GRASS GIS location and mapset, and the function returns
only the name of the output map. This map is stored in the GRASS GIS
location/mapset, and might be retrieved to R through the
rgrass::read_RAST() function or exported outside GRASS using the
r.out.gdal module, for instance."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oneimpact</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/oneimpact.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/oneimpact.html">Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/computing_zoi.html">Computing zones of influence</a></li>
    <li><a class="dropdown-item" href="../articles/zoi_on_grass.html">Zones of influence on GRASS GIS</a></li>
    <li><a class="dropdown-item" href="../articles/fitting_ZOI_logit.html">Estimating zones of influence using penalized regression</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NINAnor/oneimpact/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate the zone of influence from the nearest feature</h1>
      <small class="dont-index">Source: <a href="https://github.com/NINAnor/oneimpact/blob/main/R/calc_zoi_nearest.R" class="external-link"><code>R/calc_zoi_nearest.R</code></a></small>
      <div class="d-none name"><code>calc_zoi_nearest.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function takes in a raster with locations or counts of
infrastructure and calculates a raster (or set of rasters, in case there is
more the one value for <code>radius</code>) representing the zone of influence (ZOI)
from the neareast feature of that type of infrastructure. Zones of influence
are defined by functions that decay with the distance from each
infrastructure and their rate of decay is controlled by the ZOI radius
(<code>radius</code>), which defines how far the influence of an infrastructure
feature goes. By default, the Gaussian decay ZOI is calculated, but other
decay shapes might be used (see <code><a href="zoi_functions.html">zoi_functions()</a></code> for examples).
The function might also return the distance to the nearest feature
or a transformation from it (e.g. log- and sqrt-distance from the nearest
feature).</p>
<p>The procedure might be computed in both R and GRASS GIS. In GRASS, it
requires an active connection between the R session and a GRASS GIS
location and mapset (through the package <a href="https://osgeo.github.io/rgrass/reference/rgrass.html" class="external-link">rgrass</a>), and that the input
maps are already loaded within this GRASS GIS mapset.
If the calculations are done in R, the input is a (set of) raster map(s)
and the function returns another (set of) raster map(s). If the calculations
are done within GRASS GIS, the input is the name of a raster map already
loaded in a GRASS GIS location and mapset, and the function returns
only the name of the output map. This map is stored in the GRASS GIS
location/mapset, and might be retrieved to R through the
<code><a href="https://osgeo.github.io/rgrass/reference/read_RAST.html" class="external-link">rgrass::read_RAST()</a></code> function or exported outside GRASS using the
<code>r.out.gdal</code> module, for instance.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calc_zoi_nearest</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  radius <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Gauss"</span>, <span class="st">"exp_decay"</span>, <span class="st">"bartlett"</span>, <span class="st">"half_norm"</span>, <span class="st">"threshold"</span>, <span class="st">"step"</span>,</span>
<span>    <span class="st">"euclidean"</span>, <span class="st">"log"</span>, <span class="st">"sqrt"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"R"</span>, <span class="st">"GRASS"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  intercept <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  zoi_limit <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  lambda <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  log_base <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>  dist_offset <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  zeroAsNA <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  extent_x_cut <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  extent_y_cut <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  g_output_map_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  g_dist_metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"euclidean"</span>, <span class="st">"geodesic"</span>, <span class="st">"squared"</span>, <span class="st">"maximum"</span>, <span class="st">"manhattan"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  g_input_as_region <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  g_remove_intermediate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  g_print_expression <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  g_overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p><code>[RasterLayer,SpatRaster]</code> <br> Raster representing locations of features,
preferentially with positive value where the features
are located and NA elsewhere. Alternatively, <code>x</code> might be a binary (dummy)
spatial variable representing the presence of linear or area features, with
NA/no-data as background.
<code>x</code> can be a <code>RasterLayer</code> from raster package or a <a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">SpatRaster</a> from
<a href="https://rspatial.github.io/terra/reference/terra-package.html" class="external-link">terra</a> package. If <code>where = "GRASS"</code>, <code>x</code> must be a string corresponding
to the name of the input map within a GRASS GIS location and mapset.</p>
<p>The input raster <code>x</code> should have positive values in the pixels where infrastructure
are located and NA/no-data in all other places. In R it is also possible to have zeros
as the background and set <code>zeroAsNA = TRUE</code> for the computation of the ZOI of the
nearest feature.
In GRASS, maps without NA as background might be prepared as input for <code>calc_zoi_nearest()</code>
through <a href="https://grass.osgeo.org/grass78/manuals/r.mapcalc.html" class="external-link">raster algebra</a>
and e.g. through the use of the module
<a href="https://grass.osgeo.org/grass80/manuals/r.null.html" class="external-link"><code>r.null</code></a>.</p></dd>


<dt id="arg-radius">radius<a class="anchor" aria-label="anchor" href="#arg-radius"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> Radius of the zone of influence (ZOI),
the distance at which the ZOI vanishes or goes below a given minimum limit value
<code>zoi_limit</code>. See <code><a href="zoi_functions.html">zoi_functions()</a></code> for details.
It can be a single value or a vector of values, in which case
several ZOI layers (one for each radius) are created. This parameter is
ignored if <code>type = "euclidean"</code>, <code>type = "log"</code>, or <code>type = "sqrt"</code>.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p><code>[character(1)="Gauss"]{"Gauss", "exp_decay", "bartlett", "threshold", "step", "euclidean", "log","sqrt"}</code> <br>
Shape of the zone of influence: <br></p><ul><li><p>If <code>Gauss</code> or <code>half_norm</code>, the ZOI follows a half-normal shape: <br><code>intercept * exp(-lambda * (euclidean_distance^2))</code>. <code>intercept</code> and <code>lambda</code> are
parameters to be defined – see <code><a href="zoi_functions.html">zoi_functions()</a></code> for details.</p></li>
<li><p>If <code>exp_decay</code>, the ZOI follows an exponential decay shape: <br><code>intercept * exp(-lambda * euclidean_distance)</code>. <code>intercept</code> and <code>lambda</code> are
parameters to be defined – see <code><a href="zoi_functions.html">zoi_functions()</a></code> for details.</p></li>
<li><p>If <code>bartlett</code>, <code>linear_decay</code>, or <code>tent_decay</code>, the ZOI follows a
linear decay shape within the ZOI radius (<code>radius</code>).</p></li>
<li><p>If <code>threshold</code> or <code>step</code>, a constant influence is considered within the
zone of influence radius (<code>radius</code>). All pixels closer than
<code>radius</code> to infrastructure are considered as "under the influence" of
the nearest feature, with a constant influence value defined by the
<code>intercept</code> parameter, and all other pixels are assumed to have
zero influence.</p></li>
<li><p>If <code>euclidean</code>, the function returns the Euclidean distance as a
proxy for the ZOI, even though a proper zone of influence is not defined
in this case.</p></li>
<li><p>If <code>log</code>, the function returns the log-distance:
<code>log(euclidean_distance, base = log_base)</code> as a
proxy for the ZOI, even though a proper zone of influence is not defined
in this case.</p></li>
<li><p>If <code>sqrt</code>, the functions returns the square rooted distance:
<code>sqrt(euclidean_distance)</code> as a
proxy for the ZOI, even though a proper zone of influence is not defined
in this case.</p></li>
</ul><p>See details below.
Other options still to be implemented (such as other functions and a
generic user-defined ZOI function as input).</p></dd>


<dt id="arg-where">where<a class="anchor" aria-label="anchor" href="#arg-where"></a></dt>
<dd><p><code>[character(1)="R"]{"R", "GRASS"}</code> <br> Where should the
computation be done? Default is <code>"R"</code>. If <code>where = "GRASS"</code>, the R session
must be linked to an open GRASS GIS session in a specific location and mapset.</p></dd>


<dt id="arg-intercept">intercept<a class="anchor" aria-label="anchor" href="#arg-intercept"></a></dt>
<dd><p><code>[numeric(1)=1]</code> <br> Maximum value of the ZOI functions at
when the distance from disturbance sources is zero (<code>x = 0</code>).
For the <code>threshold_decay</code> and <code>step_decay</code> functions, <code>intercept</code> is
the constant value of the Zone of Influence within the ZOI <code>radius</code>.
For the other ZOI functions, <code>intercept</code>
is the value of the functions at the origin (where the sources of disturbance
are located, i.e. <code>x = 0</code>).
Default is <code>intercept = 1</code>. This parameter is
ignored if <code>type = "euclidean"</code>, <code>type = "log"</code>, or <code>type = "sqrt"</code>.</p></dd>


<dt id="arg-zoi-limit">zoi_limit<a class="anchor" aria-label="anchor" href="#arg-zoi-limit"></a></dt>
<dd><p><code>[numeric(1)=0.05]</code> <br> For non-vanishing functions
(e.g. <code>exp_decay</code>, <code>gaussian_decay</code>), this value is used to set the relationship
between the ZOI radius and the decay functions:
<code>radius</code> is defined as the minimum distance at which the ZOI assumes values
below <code>zoi_limit</code>. The default is 0.05. This parameter is used only
if <code>radius</code> is not <code>NULL</code>.</p></dd>


<dt id="arg-lambda">lambda<a class="anchor" aria-label="anchor" href="#arg-lambda"></a></dt>
<dd><p><code>[numeric(2)=NULL]</code> <br> For the Gaussian and exponential decay
functions (<code>type = "Gauss"</code> and <code>type = "exp_decay"</code>), <code>lambda</code> is the decay
parameter of the function. Notice that the interpretation of <code>lambda</code> is different depending on the
the function – see <code><a href="zoi_functions.html">zoi_functions()</a></code> for definitions.
For the Gaussian decay function, the value for <code>lambda</code> is only considered if both
<code>radius = NULL</code> and <code>sigma = NULL</code>. For the exponential decay function,
the value for <code>lambda</code> is only considered if both <code>radius = NULL</code> and <code>half_life = NULL</code>.</p></dd>


<dt id="arg-log-base">log_base<a class="anchor" aria-label="anchor" href="#arg-log-base"></a></dt>
<dd><p><code>[numeric(1)=exp(1)]</code> <br> Base of the logarithm, if <code>type = log</code>.</p></dd>


<dt id="arg-dist-offset">dist_offset<a class="anchor" aria-label="anchor" href="#arg-dist-offset"></a></dt>
<dd><p><code>[numeric(1)=0]</code> <br> Number to add to the Euclidean
distance before transforming it, to avoid <code>-Inf</code>/<code>Inf</code> values
(e.g. in the case of log transformation). It should be a very small value
compared to the range of values of Euclidean distance, not to influence any
further analyses.</p></dd>


<dt id="arg-zeroasna">zeroAsNA<a class="anchor" aria-label="anchor" href="#arg-zeroasna"></a></dt>
<dd><p><code>[logical(1)=FALSE]</code> <br> If <code>TRUE</code> treats cells that are
zero as if they were <code>NA</code>. Only used for computations in R (<code>where = R</code>).</p></dd>


<dt id="arg-extent-x-cut-entent-y-cut">extent_x_cut, entent_y_cut<a class="anchor" aria-label="anchor" href="#arg-extent-x-cut-entent-y-cut"></a></dt>
<dd><p><code>[numeric vector(2)=NULL]</code> <br> Vector
representing the minimum and
maximum extent in x and y for the final output, in the format c(min,max).
It is intended to keep only a region of interest, for standardizing the
parameters and region when comparing the resulting ZOI maps with the
cumulative ZOI, calculated through <code><a href="calc_zoi_cumulative.html">calc_zoi_cumulative()</a></code>.
If <code>NULL</code> (default), this parameter is ignored.</p></dd>


<dt id="arg-g-output-map-name">g_output_map_name<a class="anchor" aria-label="anchor" href="#arg-g-output-map-name"></a></dt>
<dd><p><code>[character(1)=NULL]</code> <br> Name of the output map name,
to be used only within GRASS (if <code>where = "GRASS"</code>). By default, this is <code>NULL</code>
and the output map names are a concatenation of the input map name
(e.g. <code>"map_houses"</code>) and the decay function and radius used
(e.g. for <code>type = "exp_decay"</code> and <code>radius = 1000</code>, the name would be
<code>"map_houses_exp_decay1000"</code>).
This parameter is ignored when the calculations are performed in R
(<code>where = "R"</code>).</p></dd>


<dt id="arg-g-dist-metric">g_dist_metric<a class="anchor" aria-label="anchor" href="#arg-g-dist-metric"></a></dt>
<dd><p><code>[character(1)="euclidean"]{"euclidean", "geodesic", "squared", "maximum", "manhattan"}</code> <br>
If the calculations are perfomed within GRASS GIS, this is the <code>metric</code>
argument to calculate the distance
from the infrastructure features with the module <code>r.grow.distance</code>.
More information at the GRASS GIS documentation for
<a href="https://grass.osgeo.org/grass82/manuals/r.grow.distance.html" class="external-link">this function</a>.
This parameter is ignored when the calculations are performed in R
(<code>where = "R"</code>).</p></dd>


<dt id="arg-g-input-as-region">g_input_as_region<a class="anchor" aria-label="anchor" href="#arg-g-input-as-region"></a></dt>
<dd><p><code>[logical(1)=FALSE]</code> <br> Should the input map <code>x</code> be
used to redefine the working region in GRASS before the ZOI calculation?
If <code>TRUE</code>, <code>x</code> is used to define the region with <code>g.region</code>. If <code>FALSE</code>,
the region previously defined in the GRASS GIS session is used for computation.
Default is <code>FALSE</code>. This parameter is ignored when the calculations are performed in R
(<code>where = "R"</code>).</p></dd>


<dt id="arg-g-remove-intermediate">g_remove_intermediate<a class="anchor" aria-label="anchor" href="#arg-g-remove-intermediate"></a></dt>
<dd><p><code>[logical(1)=TRUE]</code> <br> Should the intermediate
maps created for computing the output map be excluded in the end of the
process? Only used when <code>where = "GRASS"</code>.</p></dd>


<dt id="arg-g-print-expression">g_print_expression<a class="anchor" aria-label="anchor" href="#arg-g-print-expression"></a></dt>
<dd><p><code>[logical(1)=FALSE]</code> <br> Should the expression for
transforming the raster of distance into ZOI values should be printed in the prompt?
Only used when <code>where = "GRASS"</code> and <code>verbose = TRUE</code> for debugging the
result of <code>r.mapcalc</code>.</p></dd>


<dt id="arg-g-overwrite">g_overwrite<a class="anchor" aria-label="anchor" href="#arg-g-overwrite"></a></dt>
<dd><p><code>[logical(1)=FALSE]</code> <br> If the a map already exists with the
name <code>g_output_map_name</code> in the working GRASS GIS location and mapset, should
it be overwritten? Only used when <code>where = "GRASS"</code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p><code>[logical(1)=FALSE]</code> <br> Should messages of the computation steps
be printed in the prompt along the computation?</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p><br> Adittional parameters passed to <code><a href="https://rspatial.github.io/terra/reference/distance.html" class="external-link">terra::distance()</a></code>
or to the ZOI functions (see <code><a href="zoi_functions.html">zoi_functions()</a></code>) when the
calculations are performed in R.
No additional parameters implemented for computation in GRASS GIS.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If the calculations are performed in R (<code>where = "R"</code>), the function
returns a <code>RasterLayer</code> (or <code>SpatRaster</code>, according to the class of the input
object) with the zone of influence of the nearest feature. If multiple values
of <code>radius</code> are provided, a stack of rasters is returned.
If the calculations are performed in GRASS GIS (<code>where = "GRASS"</code>),
the maps are kept only within the GRASS GIS location/mapset and the function
returns the name of the calculated maps. <br>
If the computation is done in GRASS GIS, the output is name of
the output raster map(s) within the GRASS GIS location and mapset of the
current session. The user can retrieve these maps to R using
rgrass::read_RAST or export them outside GRASS using the
<code>r.out.gdal</code> module, for instance.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>In practice, the function <code>calc_zoi_nearest()</code> first calculates the distance from each
pixel to the nearest feature and then transforms it according to the ZOI
functions. In R, <code>calc_zoi_nearest()</code> makes use of the <code><a href="https://rspatial.github.io/terra/reference/distance.html" class="external-link">terra::distance()</a></code>
function and the following procedures are made through raster algebra.
In GRASS, the module
<a href="https://grass.osgeo.org/grass78/manuals/r.grow.distance.html" class="external-link"><code>r.grow.distance</code></a>
is used to calculate the Euclidean distance from
the nearest feature and
<a href="https://grass.osgeo.org/grass78/manuals/r.mapcalc.simple.html" class="external-link"><code>r.mapcalc.simple</code></a>
to transform the distance into the different ZOI of the nearest feature.</p>
<p>The input raster <code>x</code> should have positive values in the pixels where
infrastructure are located and NA/no-data in all other places.
The input raster is supposed to
represent the location of point, line, or polygon infrastructure
(e.g. houses, roads, mining areas), but any landscape variable whose
representation might be one of those would fit here
(e.g. areas of forest or any other habitat type or land cover).
We recommend that the input raster has a metric projection, so that distances
and zones of influence are based on distance to infrastructure measured in meters.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>See <code><a href="zoi_functions.html">zoi_functions()</a></code> for some ZOI function shapes. <br>
See also <code><a href="https://rspatial.github.io/terra/reference/distance.html" class="external-link">terra::distance()</a></code> for details on the calculation of the distance
to the nearest future in R. <br>
See
<a href="https://grass.osgeo.org/grass80/manuals/r.mfilter.html" class="external-link">r.grow.distance</a>,
for details on the calculation of the distance to the nearest future in GRASS. <br>
See <code><a href="calc_zoi_cumulative.html">calc_zoi_cumulative()</a></code> for the computation of the cumulative
zone of influence and density of multiple features.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Running calc_zoi_nearest through R</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Linking to GEOS 3.12.1, GDAL 3.8.4, PROJ 9.4.0; sf_use_s2() is TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load raster data</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"raster/sample_area_cabins.tif"</span>, package <span class="op">=</span> <span class="st">"oneimpact"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cabins</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load vector data</span></span></span>
<span class="r-in"><span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"vector/sample_area_cabins.gpkg"</span>, package <span class="op">=</span> <span class="st">"oneimpact"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cabins_vect</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="va">f2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reading layer `sample_area_cabins' from data source </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   `/home/runner/work/_temp/Library/oneimpact/vector/sample_area_cabins.gpkg' </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   using driver `GPKG'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 6875 features and 4 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: POINT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: 146900.1 ymin: 6622822 xmax: 194694.6 ymax: 6658891</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Projected CRS: ETRS89 / UTM zone 33N</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate distance to the nearest feature</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins</span>, type <span class="op">=</span> <span class="st">"euclidean"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calc_zoi_nearest-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate log_dist (the rest is equal)</span></span></span>
<span class="r-in"><span><span class="va">log_d</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins</span>, type <span class="op">=</span> <span class="st">"log"</span>, log_base <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">log_d</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calc_zoi_nearest-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate sqrt_dist</span></span></span>
<span class="r-in"><span><span class="va">sqrt_d</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins</span>, type <span class="op">=</span> <span class="st">"sqrt"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sqrt_d</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calc_zoi_nearest-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate exponential decay zone of influence</span></span></span>
<span class="r-in"><span><span class="co"># using exp_decay_parms parameter</span></span></span>
<span class="r-in"><span><span class="va">exp_d1</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins</span>, type <span class="op">=</span> <span class="st">"exp_decay"</span>,</span></span>
<span class="r-in"><span>                           intercept <span class="op">=</span> <span class="fl">1</span>, lambda <span class="op">=</span> <span class="fl">0.001</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">exp_d1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calc_zoi_nearest-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate exponential decay zone of influence using</span></span></span>
<span class="r-in"><span><span class="co"># radius and zoi_limit (default)</span></span></span>
<span class="r-in"><span><span class="va">radius2</span> <span class="op">&lt;-</span> <span class="fl">1000</span> <span class="co"># zoi = 1000m</span></span></span>
<span class="r-in"><span><span class="va">zoi_limit2</span> <span class="op">&lt;-</span> <span class="fl">0.05</span> <span class="co"># here zoi is the distance where the function reaches 0.05</span></span></span>
<span class="r-in"><span><span class="va">exp_d2</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins</span>, type <span class="op">=</span> <span class="st">"exp_decay"</span>, radius <span class="op">=</span> <span class="va">radius2</span>,</span></span>
<span class="r-in"><span>                           zoi_limit <span class="op">=</span> <span class="va">zoi_limit2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">exp_d2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># buffer</span></span></span>
<span class="r-in"><span><span class="co"># zoi = 1000m</span></span></span>
<span class="r-in"><span><span class="va">cabins_vect</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span>dist <span class="op">=</span> <span class="va">radius2</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">st_union</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span>add <span class="op">=</span> <span class="cn">T</span>, border <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"bottomright"</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ZoI radius"</span><span class="op">)</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">1.1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calc_zoi_nearest-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate exponential decay zone of influence using half life parameter</span></span></span>
<span class="r-in"><span><span class="co"># if half_life = 250 m and zoi_hl_ratio = 4, zoi is 1000 m</span></span></span>
<span class="r-in"><span><span class="va">half_life3</span> <span class="op">&lt;-</span> <span class="fl">250</span> <span class="co"># intensity gets down to 1/16 = 0.06 for 4*half_life=1000m</span></span></span>
<span class="r-in"><span><span class="va">zoi_hl_ratio3</span> <span class="op">&lt;-</span> <span class="fl">4</span> <span class="co"># default</span></span></span>
<span class="r-in"><span><span class="va">exp_d4</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins</span>, type <span class="op">=</span> <span class="st">"exp_decay"</span>, half_life <span class="op">=</span> <span class="va">half_life3</span>,</span></span>
<span class="r-in"><span>                           zoi_hl_ratio <span class="op">=</span> <span class="va">zoi_hl_ratio3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">exp_d4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># buffer</span></span></span>
<span class="r-in"><span><span class="va">cabins_vect</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span>dist <span class="op">=</span> <span class="va">half_life3</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">st_union</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span>add <span class="op">=</span> <span class="cn">T</span>, border <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># zoi = 1000m</span></span></span>
<span class="r-in"><span><span class="va">cabins_vect</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span>dist <span class="op">=</span> <span class="va">half_life3</span><span class="op">*</span><span class="va">zoi_hl_ratio3</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">st_union</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span>add <span class="op">=</span> <span class="cn">T</span>, border <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"bottomright"</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Exponential half-life"</span>, <span class="st">"ZoI radius"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"black"</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">1.1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calc_zoi_nearest-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate exponential decay zone of influence using</span></span></span>
<span class="r-in"><span><span class="co"># radius parameter and zoi_hl_ratio</span></span></span>
<span class="r-in"><span><span class="va">radius4</span> <span class="op">&lt;-</span> <span class="fl">4000</span> <span class="co"># intensity gets down to 1/16 = 0.06 for zoi = 4000m, half_life = 1000m</span></span></span>
<span class="r-in"><span><span class="va">zoi_hl_ratio4</span> <span class="op">&lt;-</span> <span class="fl">6</span> <span class="co"># default</span></span></span>
<span class="r-in"><span><span class="va">exp_d4</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins</span>, type <span class="op">=</span> <span class="st">"exp_decay"</span>, radius <span class="op">=</span> <span class="va">radius4</span>,</span></span>
<span class="r-in"><span>                           zoi_hl_ratio <span class="op">=</span> <span class="va">zoi_hl_ratio4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">exp_d4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># buffer</span></span></span>
<span class="r-in"><span><span class="co"># half_life = 1000m</span></span></span>
<span class="r-in"><span><span class="va">cabins_vect</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span>dist <span class="op">=</span> <span class="va">radius4</span><span class="op">/</span><span class="va">zoi_hl_ratio4</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">st_union</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span>add <span class="op">=</span> <span class="cn">T</span>, border <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># zoi = 4000m</span></span></span>
<span class="r-in"><span><span class="va">cabins_vect</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span>dist <span class="op">=</span> <span class="va">radius4</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">st_union</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span>add <span class="op">=</span> <span class="cn">T</span>, border <span class="op">=</span> <span class="st">"black"</span>, <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"bottomright"</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Exponential half-life"</span>, <span class="st">"ZoI radius"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"black"</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">1.1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calc_zoi_nearest-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#---</span></span></span>
<span class="r-in"><span><span class="co"># bartlett influence, ZOI = 1000m</span></span></span>
<span class="r-in"><span><span class="va">bart_d</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins</span>, type <span class="op">=</span> <span class="st">"bartlett"</span>, radius <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bart_d</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># buffer 1000m</span></span></span>
<span class="r-in"><span><span class="va">cabins_vect</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span>dist <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">st_union</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span>add <span class="op">=</span> <span class="cn">T</span>, border <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"bottomright"</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Bartlett ZoI 1000m"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">1.1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calc_zoi_nearest-8.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate threshold influence, ZoI = 1000m</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins</span>, type <span class="op">=</span> <span class="st">"threshold"</span>, radius <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calc_zoi_nearest-9.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Gaussian decay influence, ZoI = 1000m</span></span></span>
<span class="r-in"><span><span class="va">g_d</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins</span>, type <span class="op">=</span> <span class="st">"Gauss"</span>, radius <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">g_d</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># buffer 1000m</span></span></span>
<span class="r-in"><span><span class="va">cabins_vect</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span>dist <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">st_union</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span>add <span class="op">=</span> <span class="cn">T</span>, border <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"bottomright"</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Gaussian ZoI 1000m"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">1.1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calc_zoi_nearest-10.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#--------------------</span></span></span>
<span class="r-in"><span><span class="co"># Running calc_zoi_nearest through GRASS GIS</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://osgeo.github.io/rgrass/" class="external-link">rgrass</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load raster data</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"raster/sample_area_cabins.tif"</span>, package <span class="op">=</span> <span class="st">"oneimpact"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cabins</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># connect to grass gis and create grass location</span></span></span>
<span class="r-in"><span><span class="co"># For linux or within OSGeo4W shell</span></span></span>
<span class="r-in"><span><span class="va">grassdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.html" class="external-link">system</a></span><span class="op">(</span><span class="st">"grass --config path"</span>, intern <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># grassdir &lt;- system("grass78 --config path", intern = TRUE) # for GRASS 7.8</span></span></span>
<span class="r-in"><span><span class="co"># If you used the standalone installer in Windows</span></span></span>
<span class="r-in"><span><span class="co"># grassdir &lt;- "C:\Programs\GRASS GIS 7.8" # Correct if the path GRASS version or path is different</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gisDB</span> <span class="op">&lt;-</span> <span class="st">"."</span> <span class="co"># create location and mapset in the working directory</span></span></span>
<span class="r-in"><span><span class="va">loc</span> <span class="op">&lt;-</span> <span class="st">"ETRS_33N/"</span> <span class="co"># name of the location</span></span></span>
<span class="r-in"><span><span class="va">ms</span> <span class="op">&lt;-</span> <span class="st">"PERMANENT"</span> <span class="co"># name of the mapset</span></span></span>
<span class="r-in"><span><span class="fu">rgrass</span><span class="fu">::</span><span class="fu"><a href="https://osgeo.github.io/rgrass/reference/initGRASS.html" class="external-link">initGRASS</a></span><span class="op">(</span>gisBase <span class="op">=</span> <span class="va">grassdir</span>,</span></span>
<span class="r-in"><span>                  SG <span class="op">=</span> <span class="va">cabins</span>, <span class="co"># use map to define location projection</span></span></span>
<span class="r-in"><span>                  home <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  override <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                  gisDbase <span class="op">=</span> <span class="va">gisDB</span>,</span></span>
<span class="r-in"><span>                  location <span class="op">=</span> <span class="va">loc</span>,</span></span>
<span class="r-in"><span>                  mapset <span class="op">=</span> <span class="va">ms</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> gisdbase    . </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> location    ETRS_33N/ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mapset      PERMANENT </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rows        361 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> columns     478 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> north       6658900 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> south       6622800 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> west        146900 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> east        194700 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nsres       100 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ewres       100 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> projection:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  PROJCRS["unknown",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     BASEGEOGCRS["grs80",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         DATUM["European Terrestrial Reference System 1989",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ELLIPSOID["Geodetic_Reference_System_1980",6378137,298.257222101,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 LENGTHUNIT["metre",1]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",6258]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         PRIMEM["Greenwich",0,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ANGLEUNIT["degree",0.0174532925199433,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 ID["EPSG",9122]]]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     CONVERSION["Transverse Mercator",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         METHOD["Transverse Mercator",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",9807]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         PARAMETER["Latitude of natural origin",0,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ANGLEUNIT["degree",0.0174532925199433],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",8801]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         PARAMETER["Longitude of natural origin",15,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ANGLEUNIT["degree",0.0174532925199433],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",8802]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         PARAMETER["Scale factor at natural origin",0.9996,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             SCALEUNIT["unity",1],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",8805]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         PARAMETER["False easting",500000,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             LENGTHUNIT["metre",1],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",8806]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         PARAMETER["False northing",0,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             LENGTHUNIT["metre",1],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",8807]]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     CS[Cartesian,2],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         AXIS["easting",east,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ORDER[1],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             LENGTHUNIT["metre",1,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 ID["EPSG",9001]]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         AXIS["northing",north,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ORDER[2],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             LENGTHUNIT["metre",1,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 ID["EPSG",9001]]]] </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># define map name within GRASS GIS</span></span></span>
<span class="r-in"><span><span class="va">cabins_g</span> <span class="op">&lt;-</span> <span class="st">"cabins_example"</span></span></span>
<span class="r-in"><span><span class="co"># add file to GRASS GIS mapset</span></span></span>
<span class="r-in"><span><span class="fu">rgrass</span><span class="fu">::</span><span class="fu"><a href="https://osgeo.github.io/rgrass/reference/read_RAST.html" class="external-link">write_RAST</a></span><span class="op">(</span><span class="va">cabins</span>, <span class="va">cabins_g</span>, flags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"overwrite"</span>, <span class="st">"o"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The command:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> r.in.gdal --overwrite -o input=/home/runner/work/_temp/Library/oneimpact/raster/sample_area_cabins.tif output=cabins_example</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> produced at least one warning during execution:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> WARNING: Raster map &lt;cabins_example&gt; already exists and will be overwritten</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Over-riding projection check</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Importing raster map &lt;cabins_example&gt;...</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>    0%   3%   6%   9%  12%  15%  18%  21%  24%  27%  30%  33%  36%  39%  42%  45%  48%  51%  54%  57%  60%  63%  66%  69%  72%  75%  78%  81%  84%  87%  90%  93%  96%  99% 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> WARNING: Raster map &lt;cabins_example&gt; already exists and will be overwritten</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Over-riding projection check</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Importing raster map &lt;cabins_example&gt;...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    0%   3%   6%   9%  12%  15%  18%  21%  24%  27%  30%  33%  36%  39%  42%  45%  48%  51%  54%  57%  60%  63%  66%  69%  72%  75%  78%  81%  84%  87%  90%  93%  96%  99% 100%</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> SpatRaster read into GRASS using r.in.gdal from file</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check</span></span></span>
<span class="r-in"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cabins</span>, col <span class="op">=</span> <span class="st">"black"</span>,</span></span>
<span class="r-in"><span>            main <span class="op">=</span> <span class="st">"Map of tourist cabins"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calc_zoi_nearest-11.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#---</span></span></span>
<span class="r-in"><span><span class="co"># define region in GRASS GIS</span></span></span>
<span class="r-in"><span><span class="fu">rgrass</span><span class="fu">::</span><span class="fu"><a href="https://osgeo.github.io/rgrass/reference/execGRASS.html" class="external-link">execGRASS</a></span><span class="op">(</span><span class="st">"g.region"</span>, raster <span class="op">=</span> <span class="va">cabins_g</span>,</span></span>
<span class="r-in"><span>                  flags <span class="op">=</span> <span class="st">"p"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> projection: 99 (unknown)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> zone:       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> datum:      etrs89</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ellipsoid:  grs80</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> north:      6658900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> south:      6622800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> west:       146900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> east:       194700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nsres:      100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ewres:      100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rows:       361</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cols:       478</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cells:      172558</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Input map name within GRASS GIS</span></span></span>
<span class="r-in"><span><span class="va">cabins_g</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "cabins_example"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Exponential decay ZoI=1000m</span></span></span>
<span class="r-in"><span><span class="va">expdecay_name</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins_g</span>, type <span class="op">=</span> <span class="st">"exp_decay"</span>,</span></span>
<span class="r-in"><span>                                  radius <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>                                  where <span class="op">=</span> <span class="st">"GRASS"</span>,</span></span>
<span class="r-in"><span>                                  g_verbose <span class="op">=</span> <span class="cn">FALSE</span>, g_overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Removing raster &lt;cabins_example_zoi_nearest_euclidean&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bartlett decay ZoI=1000m</span></span></span>
<span class="r-in"><span><span class="va">bartlett_name</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins_g</span>, type <span class="op">=</span> <span class="st">"bartlett"</span>,</span></span>
<span class="r-in"><span>                                  radius <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>                                  where <span class="op">=</span> <span class="st">"GRASS"</span>, g_verbose <span class="op">=</span> <span class="cn">FALSE</span>, g_overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Removing raster &lt;cabins_example_zoi_nearest_euclidean&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Threshold influence ZoI = 1000m</span></span></span>
<span class="r-in"><span><span class="va">threshold_name</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins_g</span>, type <span class="op">=</span> <span class="st">"threshold"</span>,</span></span>
<span class="r-in"><span>                                   radius <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>                                   where <span class="op">=</span> <span class="st">"GRASS"</span>, g_verbose <span class="op">=</span> <span class="cn">FALSE</span>, g_overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Removing raster &lt;cabins_example_zoi_nearest_euclidean&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Gaussian influence ZoI = 1000m</span></span></span>
<span class="r-in"><span><span class="va">gaussian_name</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins_g</span>, type <span class="op">=</span> <span class="st">"Gauss"</span>,</span></span>
<span class="r-in"><span>                                  radius <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>                                  where <span class="op">=</span> <span class="st">"GRASS"</span>, g_verbose <span class="op">=</span> <span class="cn">FALSE</span>, g_overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Removing raster &lt;cabins_example_zoi_nearest_euclidean&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Log-distance</span></span></span>
<span class="r-in"><span><span class="va">log_name</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins_g</span>, type <span class="op">=</span> <span class="st">"log"</span>, log_base <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                             where <span class="op">=</span> <span class="st">"GRASS"</span>,</span></span>
<span class="r-in"><span>                             g_verbose <span class="op">=</span> <span class="cn">FALSE</span>, g_overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Removing raster &lt;cabins_example_zoi_nearest_euclidean&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Euclidean</span></span></span>
<span class="r-in"><span><span class="va">euclidean_name</span> <span class="op">&lt;-</span> <span class="fu">calc_zoi_nearest</span><span class="op">(</span><span class="va">cabins_g</span>, type <span class="op">=</span> <span class="st">"euclidean"</span>,</span></span>
<span class="r-in"><span>                                   where <span class="op">=</span> <span class="st">"GRASS"</span>,</span></span>
<span class="r-in"><span>                                   g_verbose <span class="op">=</span> <span class="cn">FALSE</span>, g_overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">all_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">euclidean_name</span>, <span class="va">log_name</span>, <span class="va">expdecay_name</span>,</span></span>
<span class="r-in"><span>                <span class="va">bartlett_name</span>, <span class="va">threshold_name</span>, <span class="va">gaussian_name</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "cabins_example_zoi_nearest_euclidean"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2] "cabins_example_zoi_nearest_log"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "cabins_example_zoi_nearest_exp_decay1000"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4] "cabins_example_zoi_nearest_bartlett1000" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "cabins_example_zoi_nearest_threshold1000"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6] "cabins_example_zoi_nearest_Gauss1000"    </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># visualize</span></span></span>
<span class="r-in"><span><span class="va">cabins_zoi_nearest</span> <span class="op">&lt;-</span> <span class="fu">rgrass</span><span class="fu">::</span><span class="fu"><a href="https://osgeo.github.io/rgrass/reference/read_RAST.html" class="external-link">read_RAST</a></span><span class="op">(</span><span class="va">all_names</span>, return_format <span class="op">=</span> <span class="st">"terra"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Checking GDAL data type and nodata value...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2%   5%   8%  11%  14%  17%  20%  23%  26%  29%  32%  35%  38%  41%  44%  47%  50%  53%  56%  59%  62%  65%  68%  71%  74%  77%  80%  83%  86%  89%  92%  95%  98% 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Using GDAL data type &lt;Float64&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exporting raster data to RRASTER format...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2%   5%   8%  11%  14%  17%  20%  23%  26%  29%  32%  35%  38%  41%  44%  47%  50%  53%  56%  59%  62%  65%  68%  71%  74%  77%  80%  83%  86%  89%  92%  95%  98% 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r.out.gdal complete. File &lt;/tmp/RtmpXUdBg8/file26cb636d8d5a.grd&gt; created.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Checking GDAL data type and nodata value...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2%   5%   8%  11%  14%  17%  20%  23%  26%  29%  32%  35%  38%  41%  44%  47%  50%  53%  56%  59%  62%  65%  68%  71%  74%  77%  80%  83%  86%  89%  92%  95%  98% 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Using GDAL data type &lt;Float64&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exporting raster data to RRASTER format...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2%   5%   8%  11%  14%  17%  20%  23%  26%  29%  32%  35%  38%  41%  44%  47%  50%  53%  56%  59%  62%  65%  68%  71%  74%  77%  80%  83%  86%  89%  92%  95%  98% 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r.out.gdal complete. File &lt;/tmp/RtmpXUdBg8/file26cb5cdee41f.grd&gt; created.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Checking GDAL data type and nodata value...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2%   5%   8%  11%  14%  17%  20%  23%  26%  29%  32%  35%  38%  41%  44%  47%  50%  53%  56%  59%  62%  65%  68%  71%  74%  77%  80%  83%  86%  89%  92%  95%  98% 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Using GDAL data type &lt;Float64&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exporting raster data to RRASTER format...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2%   5%   8%  11%  14%  17%  20%  23%  26%  29%  32%  35%  38%  41%  44%  47%  50%  53%  56%  59%  62%  65%  68%  71%  74%  77%  80%  83%  86%  89%  92%  95%  98% 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r.out.gdal complete. File &lt;/tmp/RtmpXUdBg8/file26cb46c37707.grd&gt; created.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Checking GDAL data type and nodata value...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2%   5%   8%  11%  14%  17%  20%  23%  26%  29%  32%  35%  38%  41%  44%  47%  50%  53%  56%  59%  62%  65%  68%  71%  74%  77%  80%  83%  86%  89%  92%  95%  98% 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Using GDAL data type &lt;Float64&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exporting raster data to RRASTER format...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2%   5%   8%  11%  14%  17%  20%  23%  26%  29%  32%  35%  38%  41%  44%  47%  50%  53%  56%  59%  62%  65%  68%  71%  74%  77%  80%  83%  86%  89%  92%  95%  98% 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r.out.gdal complete. File &lt;/tmp/RtmpXUdBg8/file26cb360ffe57.grd&gt; created.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Checking GDAL data type and nodata value...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2%   5%   8%  11%  14%  17%  20%  23%  26%  29%  32%  35%  38%  41%  44%  47%  50%  53%  56%  59%  62%  65%  68%  71%  74%  77%  80%  83%  86%  89%  92%  95%  98% 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Using GDAL data type &lt;Float64&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exporting raster data to RRASTER format...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2%   5%   8%  11%  14%  17%  20%  23%  26%  29%  32%  35%  38%  41%  44%  47%  50%  53%  56%  59%  62%  65%  68%  71%  74%  77%  80%  83%  86%  89%  92%  95%  98% 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r.out.gdal complete. File &lt;/tmp/RtmpXUdBg8/file26cb63d9fb1c.grd&gt; created.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Checking GDAL data type and nodata value...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2%   5%   8%  11%  14%  17%  20%  23%  26%  29%  32%  35%  38%  41%  44%  47%  50%  53%  56%  59%  62%  65%  68%  71%  74%  77%  80%  83%  86%  89%  92%  95%  98% 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Using GDAL data type &lt;Float64&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exporting raster data to RRASTER format...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2%   5%   8%  11%  14%  17%  20%  23%  26%  29%  32%  35%  38%  41%  44%  47%  50%  53%  56%  59%  62%  65%  68%  71%  74%  77%  80%  83%  86%  89%  92%  95%  98% 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r.out.gdal complete. File &lt;/tmp/RtmpXUdBg8/file26cbcce7a39.grd&gt; created.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">title_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Euclidean distance"</span>, <span class="st">"Log distance (base 10)"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"Exponential ZoI 1000m"</span>, <span class="st">"Bartlett ZoI 1000m"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"Threshold ZoI 1000m"</span>, <span class="st">"Gaussian ZoI 1000m"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cabins_zoi_nearest</span>, main <span class="op">=</span> <span class="va">title_plot</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calc_zoi_nearest-12.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove rasters created</span></span></span>
<span class="r-in"><span><span class="co"># to_remove_rast &lt;- c(all_names)</span></span></span>
<span class="r-in"><span><span class="co"># rgrass::execGRASS("g.remove", type = "rast", name = to_remove_rast, flags = "f")</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bernardo Brandão Niebuhr, Manuela Panzacchi, Bram van Moorter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

