<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get estimates of zone of influence (ZOI) from response curves — zoi_from_curve • oneimpact</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get estimates of zone of influence (ZOI) from response curves — zoi_from_curve"><meta name="description" content="This generic function computes ZOI metrics—maximum effect size,
ZOI radius, and impact—
for ZOI predictor variables based on response curves.
The ZOI radius is estimated as the
It supports two types of input: a data.frame of predictions
or a bag of models."><meta property="og:description" content="This generic function computes ZOI metrics—maximum effect size,
ZOI radius, and impact—
for ZOI predictor variables based on response curves.
The ZOI radius is estimated as the
It supports two types of input: a data.frame of predictions
or a bag of models."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oneimpact</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/oneimpact.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/oneimpact.html">Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/computing_zoi.html">Computing zones of influence</a></li>
    <li><a class="dropdown-item" href="../articles/zoi_on_grass.html">Zones of influence on GRASS GIS</a></li>
    <li><a class="dropdown-item" href="../articles/fitting_ZOI_logit.html">Estimating zones of influence using penalized regression</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NINAnor/oneimpact/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get estimates of zone of influence (ZOI) from response curves</h1>
      <small class="dont-index">Source: <a href="https://github.com/NINAnor/oneimpact/blob/main/R/zoi_from_curve.R" class="external-link"><code>R/zoi_from_curve.R</code></a></small>
      <div class="d-none name"><code>zoi_from_curve.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This generic function computes ZOI metrics—<strong>maximum effect size</strong>,
<strong>ZOI radius</strong>, and <strong>impact</strong>—
for ZOI predictor variables based on response curves.
The ZOI radius is estimated as the
It supports two types of input: a data.frame of predictions
or a bag of models.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">zoi_from_curve</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">zoi_from_curve</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  percentage <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  curve <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"median"</span>, <span class="st">"mean"</span><span class="op">)</span>,</span>
<span>  ci <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"linear"</span>, <span class="st">"exp"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  mean_col_name <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  median_col_name <span class="op">=</span> <span class="st">"quantile:0.5"</span>,</span>
<span>  ci_col_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quantile:0.025"</span>, <span class="st">"quantile:0.975"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'bag'</span></span>
<span><span class="fu">zoi_from_curve</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  include <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  percentage <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  curve <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"median"</span>, <span class="st">"mean"</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"linear"</span>, <span class="st">"exp"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  return_predictions <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  return_format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"list"</span>, <span class="st">"df"</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>  ci <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  wq_probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.025</span>, <span class="fl">0.5</span>, <span class="fl">0.975</span><span class="op">)</span>,</span>
<span>  n_features <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  mean_col_name <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  median_col_name <span class="op">=</span> <span class="st">"quantile:0.5"</span>,</span>
<span>  ci_col_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quantile:0.025"</span>, <span class="st">"quantile:0.975"</span><span class="op">)</span>,</span>
<span>  radius_max <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  baseline <span class="op">=</span> <span class="st">"zero"</span>,</span>
<span>  type_feature <span class="op">=</span> <span class="st">"line"</span>,</span>
<span>  type_feature_recompute <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  radii <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">250</span>, <span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">2500</span>, <span class="fl">5000</span>, <span class="fl">10000</span><span class="op">)</span>,</span>
<span>  zoi_shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"circle"</span>, <span class="st">"Gauss"</span>, <span class="st">"rectangle"</span>, <span class="st">"exp_decay"</span>, <span class="st">"bartlett"</span>, <span class="st">"threshold"</span>,</span>
<span>    <span class="st">"mfilter"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Either a <code>data.frame</code> containing response curve predictions for a single variable,
or a <code>bag</code> object containing an ensemble of models.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to the appropriate method.</p></dd>


<dt id="arg-percentage">percentage<a class="anchor" aria-label="anchor" href="#arg-percentage"></a></dt>
<dd><p><code>[numeric(1)=0.95]</code> <br> Numeric between 0 and 1. Defines the
threshold for ZOI radius as a proportion of the maximum effect size.
Default is <code>0.95</code>.</p></dd>


<dt id="arg-curve">curve<a class="anchor" aria-label="anchor" href="#arg-curve"></a></dt>
<dd><p><code>[character(1)=c("mean", "median")]</code> <br> Character vector.
Which central tendency curves to use: <code>"median"</code>, <code>"mean"</code>, or both.</p></dd>


<dt id="arg-ci">ci<a class="anchor" aria-label="anchor" href="#arg-ci"></a></dt>
<dd><p><code>[logical(1)=TRUE]</code> <br> Logical. Whether to compute ZOI estimates for
the upper and lower limits of the confidence interval. Default is TRUE.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p><code>[character(1)="linear"]{"linear", "exp"}</code> <br> Character. Defines whether
the calculation of ZOI should be based on the prediction of at linear
or response (exponential) scale: <code>"linear"</code> or <code>"exp"</code>, respectively.</p></dd>


<dt id="arg-mean-col-name">mean_col_name<a class="anchor" aria-label="anchor" href="#arg-mean-col-name"></a></dt>
<dd><p><code>[character="mean"]</code> <br> Name of the column containing
the mean response curve.</p></dd>


<dt id="arg-median-col-name">median_col_name<a class="anchor" aria-label="anchor" href="#arg-median-col-name"></a></dt>
<dd><p><code>[character="quantile:0.5"]</code> <br> Name of the column
containing the median response curve.</p></dd>


<dt id="arg-ci-col-name">ci_col_name<a class="anchor" aria-label="anchor" href="#arg-ci-col-name"></a></dt>
<dd><p><code>[character=c("quantile:0.255", "quantile:0.975")]</code> <br> Character
vector of length 2. Names of columns for lower and upper confidence intervals.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p><code>[data.frame]</code> <br> The original dataset used for model fitting.</p></dd>


<dt id="arg-include">include<a class="anchor" aria-label="anchor" href="#arg-include"></a></dt>
<dd><p><code>[character="all"]</code> <br> Character. Either <code>"all"</code> or a
regex pattern to filter selected ZOI variables.</p></dd>


<dt id="arg-return-predictions">return_predictions<a class="anchor" aria-label="anchor" href="#arg-return-predictions"></a></dt>
<dd><p><code>[logical=FALSE]</code> <br> Logical. Whether to return
the prediction curves alongside ZOI metrics. If <code>TRUE</code>, the output is necessarily
a <code>list</code> with predictions and the ZOI parameters.</p></dd>


<dt id="arg-return-format">return_format<a class="anchor" aria-label="anchor" href="#arg-return-format"></a></dt>
<dd><p><code>[character="df"]{"list", "df"}</code> <br>
Format of the returned ZOI metrics. Either a list of data.frames (if <code>return_format = "list"</code>),
one for each variable, or a single <code>data.frame</code> (default, if <code>return_format = "df"</code>).</p></dd>


<dt id="arg-wq-probs">wq_probs<a class="anchor" aria-label="anchor" href="#arg-wq-probs"></a></dt>
<dd><p><code>[numeric,vector=c(0.025, 0.975)]</code> <br> Numeric vector of quantiles
used for prediction summaries.</p></dd>


<dt id="arg-n-features">n_features<a class="anchor" aria-label="anchor" href="#arg-n-features"></a></dt>
<dd><p><code>[numeric=1]</code> <br> Number of features used in ZOI prediction.
It can a single number (considered the same for all ZOI variables) or a vector
with the same number of elements as ZOI variables in the model.</p></dd>


<dt id="arg-radius-max">radius_max<a class="anchor" aria-label="anchor" href="#arg-radius-max"></a></dt>
<dd><p><code>[numeric=NULL]</code> <br> Numeric. Maximum distance/radius to use for
prediction curves. If <code>NULL</code> (default), the maximum value present in the bag's
predictor table is used.</p></dd>


<dt id="arg-baseline">baseline<a class="anchor" aria-label="anchor" href="#arg-baseline"></a></dt>
<dd><p><code>[character="zero"]</code> <br> Character. Baseline used in <code><a href="predict.html">predict()</a></code> (e.g., <code>"zero"</code>).</p></dd>


<dt id="arg-type-feature">type_feature<a class="anchor" aria-label="anchor" href="#arg-type-feature"></a></dt>
<dd><p><code>[character="point"]</code> <br> Character or vector. Type of spatial feature used in
<code><a href="predict.html">predict()</a></code>.</p></dd>


<dt id="arg-type-feature-recompute">type_feature_recompute<a class="anchor" aria-label="anchor" href="#arg-type-feature-recompute"></a></dt>
<dd><p><code>[logical=FALSE]</code> <br> Logical. Whether to recompute spatial
features within <code><a href="predict.html">predict()</a></code>, for linear features.</p></dd>


<dt id="arg-resolution">resolution<a class="anchor" aria-label="anchor" href="#arg-resolution"></a></dt>
<dd><p><code>[numeric=200]</code> <br> Integer. Resolution used in the recomuptation
of ZOIs for linear features.</p></dd>


<dt id="arg-radii">radii<a class="anchor" aria-label="anchor" href="#arg-radii"></a></dt>
<dd><p><code>[vector]</code> <br> Numeric vector. Radii used for ZOI modeling.</p></dd>


<dt id="arg-zoi-shape">zoi_shape<a class="anchor" aria-label="anchor" href="#arg-zoi-shape"></a></dt>
<dd><p><code>[character]</code> <br> Character. Shape of the ZOI used in the model
(e.g., <code>"circle"</code>, <code>"Gauss"</code>, <code>"exp_decay"</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.frame</code> or a <code>list</code> containing ZOI metrics:</p><ul><li><p><code>max_effect_size</code>: Maximum effect size on the relative selection strength (y) axis.</p></li>
<li><p><code>zoi_radius</code>: Distance at which the effect drops below a threshold,
defined by the parameter <code>percentage</code>.</p></li>
<li><p><code>effect_zoi_radius</code>: Relative selection strength (y axis) valye in which the ZOI
is reached.</p></li>
<li><p><code>impact</code>: Area under the curve up to the ZOI radius,
combining the varying effect size with distance.
Each ZOI measure presents mean, median, CI lower, and CI upper.</p></li>
</ul><p>If <code>x</code> is a bag object, the function returns wither a <code>list</code> or
<code>data.frame</code> of ZOI measures for each ZOI variable in the bag.
If <code>return_predictions = TRUE</code>, also returns the prediction curves.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>

    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bernardo Brandão Niebuhr, Manuela Panzacchi, Bram van Moorter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

