<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rasterizes a vector counting the number of features in each pixel — grass_v2rast_count • oneimpact</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Rasterizes a vector counting the number of features in each pixel — grass_v2rast_count"><meta name="description" content="This function rasterizes a vector file in GRASS GIS, counting the number of
vector features within each pixel. The function uses the resolution and extent
already set as the GRASS GIS mapset's computational region. If input_as_region
is set to TRUE, the extent of the vector map x is used reset as the region.
The resolution, though, continues the same set up earlier through g.region."><meta property="og:description" content="This function rasterizes a vector file in GRASS GIS, counting the number of
vector features within each pixel. The function uses the resolution and extent
already set as the GRASS GIS mapset's computational region. If input_as_region
is set to TRUE, the extent of the vector map x is used reset as the region.
The resolution, though, continues the same set up earlier through g.region."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oneimpact</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/oneimpact.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/oneimpact.html">Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/computing_zoi.html">Computing zones of influence</a></li>
    <li><a class="dropdown-item" href="../articles/zoi_on_grass.html">Zones of influence on GRASS GIS</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NINAnor/oneimpact/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Rasterizes a vector counting the number of features in each pixel</h1>
      <small class="dont-index">Source: <a href="https://github.com/NINAnor/oneimpact/blob/main/R/grass_v2rast_count.R" class="external-link"><code>R/grass_v2rast_count.R</code></a></small>
      <div class="d-none name"><code>grass_v2rast_count.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function rasterizes a vector file in GRASS GIS, counting the number of
vector features within each pixel. The function uses the resolution and extent
already set as the GRASS GIS mapset's computational region. If <code>input_as_region</code>
is set to <code>TRUE</code>, the extent of the vector map <code>x</code> is used reset as the region.
The resolution, though, continues the same set up earlier through <code>g.region</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">grass_v2rast_count</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"_count"</span><span class="op">)</span>,</span>
<span>  column <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  input_as_region <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  align <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  remove_intermediate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Input vector map.</p></dd>


<dt id="arg-output">output<a class="anchor" aria-label="anchor" href="#arg-output"></a></dt>
<dd><p>Output map name.</p></dd>


<dt id="arg-column">column<a class="anchor" aria-label="anchor" href="#arg-column"></a></dt>
<dd><p><code>[chracter(1)=NULL</code> <br> Default is <code>NULL</code>. If not <code>NULL</code>, the name of a column
in the input vector <code>x</code> that corresponds to the column to be summed to count the number
of features in each pixel of the output raster map. If <code>NULL</code>, this column is created in
a temporary vector, with all values equal 1.</p></dd>


<dt id="arg-input-as-region">input_as_region<a class="anchor" aria-label="anchor" href="#arg-input-as-region"></a></dt>
<dd><p><code>[logical(1)=FALSE]</code> <br> Default is FALSE. Whether the GRASS GIS
computational region should be set within the function (to the extent of <code>x</code>) or not.
If <code>FALSE</code>, the current computational region is used.</p></dd>


<dt id="arg-align">align<a class="anchor" aria-label="anchor" href="#arg-align"></a></dt>
<dd><p><code>[character(1)=NULL]</code> <br> Name of a raster map with which to align the
computational region to produce the output map.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p><code>[logical(1)=FALSE]</code> <br> Should messages of the computation steps
be printed in the prompt along the computation?</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p><code>[logical(1)]</code> <br> Whether the output maps should be overwriten
(flag <code>overwrite = TRUE</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A raster map with the count of features within each pixel. The map is written
within the GRASS GIS mapset. In R, the output is a string with the name of this
map.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># not run</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># libraries</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://osgeo.github.io/rgrass/" class="external-link">rgrass</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Load vector data</span></span></span>
<span class="r-in"><span>  <span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"vector/sample_area_cabins.gpkg"</span>, package <span class="op">=</span> <span class="st">"oneimpact"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">cabins_vect</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Load referemce raster data - for creation of GRASS project</span></span></span>
<span class="r-in"><span>  <span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"raster/sample_area_cabins.tif"</span>, package <span class="op">=</span> <span class="st">"oneimpact"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">cabins</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># connect to grass gis and create grass location</span></span></span>
<span class="r-in"><span>  <span class="co"># For linux or within OSGeo4W shell</span></span></span>
<span class="r-in"><span>  <span class="va">grassdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.html" class="external-link">system</a></span><span class="op">(</span><span class="st">"grass --config path"</span>, intern <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># grassdir &lt;- system("grass78 --config path", intern = TRUE) # for GRASS 7.8</span></span></span>
<span class="r-in"><span>  <span class="co"># If you used the standalone installer in Windows</span></span></span>
<span class="r-in"><span>  <span class="co"># grassdir &lt;- "C:\Programs\GRASS GIS 7.8" # Correct if the path GRASS version or path is different</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">gisDB</span> <span class="op">&lt;-</span> <span class="st">"."</span> <span class="co"># create location and mapset in the working directory</span></span></span>
<span class="r-in"><span>  <span class="va">loc</span> <span class="op">&lt;-</span> <span class="st">"ETRS_33N/"</span> <span class="co"># name of the location</span></span></span>
<span class="r-in"><span>  <span class="va">ms</span> <span class="op">&lt;-</span> <span class="st">"PERMANENT"</span> <span class="co"># name of the mapset</span></span></span>
<span class="r-in"><span>  <span class="fu">rgrass</span><span class="fu">::</span><span class="fu"><a href="https://osgeo.github.io/rgrass/reference/initGRASS.html" class="external-link">initGRASS</a></span><span class="op">(</span>gisBase <span class="op">=</span> <span class="va">grassdir</span>,</span></span>
<span class="r-in"><span>                    SG <span class="op">=</span> <span class="va">cabins</span>, <span class="co"># use map to define location projection</span></span></span>
<span class="r-in"><span>                    home <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    override <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                    gisDbase <span class="op">=</span> <span class="va">gisDB</span>,</span></span>
<span class="r-in"><span>                    location <span class="op">=</span> <span class="va">loc</span>,</span></span>
<span class="r-in"><span>                    mapset <span class="op">=</span> <span class="va">ms</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># add map to GRASS</span></span></span>
<span class="r-in"><span>  <span class="fu">rgrass</span><span class="fu">::</span><span class="fu"><a href="https://osgeo.github.io/rgrass/reference/read_VECT.html" class="external-link">write_VECT</a></span><span class="op">(</span><span class="va">cabins_vect</span>, vname <span class="op">=</span> <span class="st">"cabins_vect"</span>, flags <span class="op">=</span> <span class="st">"o"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># set region</span></span></span>
<span class="r-in"><span>  <span class="fu">rgrass</span><span class="fu">::</span><span class="fu"><a href="https://osgeo.github.io/rgrass/reference/execGRASS.html" class="external-link">execGRASS</a></span><span class="op">(</span><span class="st">"g.region"</span>, vector <span class="op">=</span> <span class="va">cabins_vect</span>, res <span class="op">=</span> <span class="st">"100"</span>, flags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># rasterize with count, creating a new temp_vector</span></span></span>
<span class="r-in"><span>  <span class="va">cabins_count_name</span> <span class="op">&lt;-</span> <span class="fu">grass_v2rast_count</span><span class="op">(</span><span class="st">"cabins_vect"</span>, output <span class="op">=</span> <span class="st">"cabins_count"</span>,</span></span>
<span class="r-in"><span>                                          verbose <span class="op">=</span> <span class="cn">TRUE</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># rasterize with count, without creating a temporary vector</span></span></span>
<span class="r-in"><span>  <span class="va">cabins_count_name</span> <span class="op">&lt;-</span> <span class="fu">grass_v2rast_count</span><span class="op">(</span><span class="va">cabins_vect_name</span>, output <span class="op">=</span> <span class="st">"cabins_count"</span>,</span></span>
<span class="r-in"><span>                                          column <span class="op">=</span> <span class="st">"value"</span>,</span></span>
<span class="r-in"><span>                                          verbose <span class="op">=</span> <span class="cn">TRUE</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># visualize</span></span></span>
<span class="r-in"><span>  <span class="fu">rgrass</span><span class="fu">::</span><span class="fu"><a href="https://osgeo.github.io/rgrass/reference/read_RAST.html" class="external-link">read_RAST</a></span><span class="op">(</span><span class="va">cabins_count_name</span>, return_format <span class="op">=</span> <span class="st">"terra"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span>main <span class="op">=</span> <span class="st">"Number of private cabins"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># remove rasters created</span></span></span>
<span class="r-in"><span>  <span class="co"># to_remove_vect &lt;- c(test_region_name, cabins_vect_name)</span></span></span>
<span class="r-in"><span>  <span class="co"># to_remove_rast &lt;- c(cabins_count_name)</span></span></span>
<span class="r-in"><span>  <span class="co"># rgrass::execGRASS("g.remove", type = "vect", name = to_remove_vect, flags = "f")</span></span></span>
<span class="r-in"><span>  <span class="co"># rgrass::execGRASS("g.remove", type = "rast", name = to_remove_rast, flags = "f")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bernardo Brandão Niebuhr, Manuela Panzacchi, Bram van Moorter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

