<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Explore potential hierarchical blocks before sampling or spatial stratification — explore_blocks_pre • oneimpact</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Explore potential hierarchical blocks before sampling or spatial stratification — explore_blocks_pre"><meta name="description" content="Function to explore the number of cases and observations for the different
sampling units possibly used as the base H0 hierarchical level, such as population ID,
study area, animal ID, or year, before spatial stratification or creating samples
for the bootstrapped approach.
The function can help understand how imbalanced is the data across H0 levels used
for validation."><meta property="og:description" content="Function to explore the number of cases and observations for the different
sampling units possibly used as the base H0 hierarchical level, such as population ID,
study area, animal ID, or year, before spatial stratification or creating samples
for the bootstrapped approach.
The function can help understand how imbalanced is the data across H0 levels used
for validation."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oneimpact</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/oneimpact.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/oneimpact.html">Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/computing_zoi.html">Computing zones of influence</a></li>
    <li><a class="dropdown-item" href="../articles/zoi_on_grass.html">Zones of influence on GRASS GIS</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NINAnor/oneimpact/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Explore potential hierarchical blocks before sampling or spatial stratification</h1>
      <small class="dont-index">Source: <a href="https://github.com/NINAnor/oneimpact/blob/main/R/explore_blocks.R" class="external-link"><code>R/explore_blocks.R</code></a></small>
      <div class="d-none name"><code>explore_blocks_pre.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function to explore the number of cases and observations for the different
sampling units possibly used as the base H0 hierarchical level, such as population ID,
study area, animal ID, or year, before spatial stratification or creating samples
for the bootstrapped approach.
The function can help understand how imbalanced is the data across H0 levels used
for validation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">explore_blocks_pre</span><span class="op">(</span><span class="va">data</span>, <span class="va">colH0</span>, animal_id <span class="op">=</span> <span class="cn">NULL</span>, col_case <span class="op">=</span> <span class="st">"case"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p><code>[data.frame,tibble]</code> <br> Complete data set to be analyzed.</p></dd>


<dt id="arg-colh-">colH0<a class="anchor" aria-label="anchor" href="#arg-colh-"></a></dt>
<dd><p><code>[character]</code> <br> Name of the column in <code>data</code> to be used as the H0
hierarchical level, intended for model validation.</p></dd>


<dt id="arg-animal-id">animal_id<a class="anchor" aria-label="anchor" href="#arg-animal-id"></a></dt>
<dd><p><code>[character]</code> <br> Name of the column in <code>data</code> representing
animal ID. If <code>NULL</code> (default), summaries are not created for individuals.</p></dd>


<dt id="arg-col-case">col_case<a class="anchor" aria-label="anchor" href="#arg-col-case"></a></dt>
<dd><p><code>[string(1)="case"]</code> <br> Name of the column in <code>data</code> representing
the case or used/available points. Default is <code>"case"</code>.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># read data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"reindeer_ssf"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># explore blocks - animal ID as block H0</span></span></span>
<span class="r-in"><span><span class="fu">explore_blocks_pre</span><span class="op">(</span><span class="va">reindeer_ssf</span>, <span class="st">"original_animal_id"</span>, col_case <span class="op">=</span> <span class="st">"case_"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 9 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   original_animal_id     n n_presences</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>               <span style="text-decoration: underline;">3</span>358  <span style="text-decoration: underline;">5</span>346         486</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>               <span style="text-decoration: underline;">3</span>361  <span style="text-decoration: underline;">5</span>412         492</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>               <span style="text-decoration: underline;">3</span>362  <span style="text-decoration: underline;">2</span>706         246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>               <span style="text-decoration: underline;">3</span>364  <span style="text-decoration: underline;">5</span>214         474</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>               <span style="text-decoration: underline;">3</span>372  <span style="text-decoration: underline;">2</span>706         246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span>               <span style="text-decoration: underline;">3</span>378  <span style="text-decoration: underline;">2</span>706         246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span>               <span style="text-decoration: underline;">6</span>331  <span style="text-decoration: underline;">2</span>706         246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span>               <span style="text-decoration: underline;">6</span>333  <span style="text-decoration: underline;">2</span>233         203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">9</span>               <span style="text-decoration: underline;">6</span>335  <span style="text-decoration: underline;">2</span>706         246</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># explore blocks - year as block H0</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘lubridate’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:terra’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, union</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     date, intersect, setdiff, union</span>
<span class="r-in"><span><span class="va">reindeer_ssf</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">t1_</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">explore_blocks_pre</span><span class="op">(</span><span class="st">"year"</span>, col_case <span class="op">=</span> <span class="st">"case_"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    year     n n_presences</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">2</span>007 <span style="text-decoration: underline;">16</span>071        <span style="text-decoration: underline;">1</span>461</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">2</span>008  <span style="text-decoration: underline;">8</span>019         729</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">2</span>009  <span style="text-decoration: underline;">7</span>645         695</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># year as block H0 + animal ID</span></span></span>
<span class="r-in"><span><span class="va">reindeer_ssf</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">t1_</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">explore_blocks_pre</span><span class="op">(</span><span class="st">"year"</span>, animal_id <span class="op">=</span> <span class="st">"original_animal_id"</span>, col_case <span class="op">=</span> <span class="st">"case_"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 12 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     year original_animal_id     n n_presences</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">2</span>007               <span style="text-decoration: underline;">3</span>358  <span style="text-decoration: underline;">2</span>640         240</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">2</span>007               <span style="text-decoration: underline;">3</span>361  <span style="text-decoration: underline;">2</span>706         246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">2</span>007               <span style="text-decoration: underline;">3</span>362  <span style="text-decoration: underline;">2</span>706         246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">2</span>007               <span style="text-decoration: underline;">3</span>364  <span style="text-decoration: underline;">2</span>607         237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">2</span>007               <span style="text-decoration: underline;">3</span>372  <span style="text-decoration: underline;">2</span>706         246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">2</span>007               <span style="text-decoration: underline;">3</span>378  <span style="text-decoration: underline;">2</span>706         246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">2</span>008               <span style="text-decoration: underline;">3</span>358  <span style="text-decoration: underline;">2</span>706         246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">2</span>008               <span style="text-decoration: underline;">3</span>361  <span style="text-decoration: underline;">2</span>706         246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">2</span>008               <span style="text-decoration: underline;">3</span>364  <span style="text-decoration: underline;">2</span>607         237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>009               <span style="text-decoration: underline;">6</span>331  <span style="text-decoration: underline;">2</span>706         246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span>  <span style="text-decoration: underline;">2</span>009               <span style="text-decoration: underline;">6</span>333  <span style="text-decoration: underline;">2</span>233         203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span>  <span style="text-decoration: underline;">2</span>009               <span style="text-decoration: underline;">6</span>335  <span style="text-decoration: underline;">2</span>706         246</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bernardo Brandão Niebuhr, Manuela Panzacchi, Bram van Moorter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

