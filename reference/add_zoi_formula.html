<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Adds ZOI radii to formula — add_zoi_formula • oneimpact</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Adds ZOI radii to formula — add_zoi_formula"><meta name="description" content="Given the structure of a formula to be fitted using a data set, the function adds multiple radii
for variables for which the zone of influence (ZOI) or scale of effect (SOE) is to be assessed
through a statistical model. The terms representing the ZOI/SOE variables should be identified
with a pattern (see argument pattern).
It returns the complete formula with all variables and radii for the ZOI/SOE terms.
If predictor_table = TRUE, it also returns a table with information
about each predictor (e.g. whether or not it is a ZOI variable, which radius and shape, to
what type of infrastructure it corresponds), to be used by some of the algorithms
in the penalized regression modeling."><meta property="og:description" content="Given the structure of a formula to be fitted using a data set, the function adds multiple radii
for variables for which the zone of influence (ZOI) or scale of effect (SOE) is to be assessed
through a statistical model. The terms representing the ZOI/SOE variables should be identified
with a pattern (see argument pattern).
It returns the complete formula with all variables and radii for the ZOI/SOE terms.
If predictor_table = TRUE, it also returns a table with information
about each predictor (e.g. whether or not it is a ZOI variable, which radius and shape, to
what type of infrastructure it corresponds), to be used by some of the algorithms
in the penalized regression modeling."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oneimpact</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/oneimpact.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/oneimpact.html">Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/computing_zoi.html">Computing zones of influence</a></li>
    <li><a class="dropdown-item" href="../articles/zoi_on_grass.html">Zones of influence on GRASS GIS</a></li>
    <li><a class="dropdown-item" href="../articles/fitting_ZOI_logit.html">Estimating zones of influence using penalized regression</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NINAnor/oneimpact/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Adds ZOI radii to formula</h1>
      <small class="dont-index">Source: <a href="https://github.com/NINAnor/oneimpact/blob/main/R/add_zoi_formula.R" class="external-link"><code>R/add_zoi_formula.R</code></a></small>
      <div class="d-none name"><code>add_zoi_formula.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given the structure of a formula to be fitted using a data set, the function adds multiple radii
for variables for which the zone of influence (ZOI) or scale of effect (SOE) is to be assessed
through a statistical model. The terms representing the ZOI/SOE variables should be identified
with a pattern (see argument <code>pattern</code>).
It returns the complete formula with all variables and radii for the ZOI/SOE terms.
If <code>predictor_table = TRUE</code>, it also returns a table with information
about each predictor (e.g. whether or not it is a ZOI variable, which radius and shape, to
what type of infrastructure it corresponds), to be used by some of the algorithms
in the penalized regression modeling.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_zoi_formula</span><span class="op">(</span></span>
<span>  <span class="va">f</span>,</span>
<span>  <span class="va">zoi_radius</span>,</span>
<span>  type <span class="op">=</span> <span class="st">""</span>,</span>
<span>  pattern <span class="op">=</span> <span class="st">"XXX"</span>,</span>
<span>  cumulative <span class="op">=</span> <span class="st">""</span>,</span>
<span>  separator <span class="op">=</span> <span class="st">"_"</span>,</span>
<span>  remove_term <span class="op">=</span> <span class="st">""</span>,</span>
<span>  predictor_table <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-f">f<a class="anchor" aria-label="anchor" href="#arg-f"></a></dt>
<dd><p><code>[formula]</code> <br> A formula to be fitted in a statistical model. Here we do not need
the actual name of each term, but all ZOI variables whose radius/scale shall be fitted might
be added with a pattern, e.g. <code>"road_traffic_zoiXXXX"</code>. The pattern (e.g <code>"XXXX"</code>) needs to be
set using the argument <code>pattern</code>.</p></dd>


<dt id="arg-zoi-radius">zoi_radius<a class="anchor" aria-label="anchor" href="#arg-zoi-radius"></a></dt>
<dd><p><code>[numeric,vector]</code> <br> A vector of radii/scales for the zone of influence,
to be added to the formula (e.g. <code>c(100, 200, 300)</code>).</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p><code>[character=""]</code> <br> Shape(s) of the ZOI (or vector of shapes if more than one),
to be added to the terms name (e.g. <code>"exp"</code>, <code>"linear"</code>).</p></dd>


<dt id="arg-pattern">pattern<a class="anchor" aria-label="anchor" href="#arg-pattern"></a></dt>
<dd><p><code>[character]</code> <br> Pattern to be replaced in the formula, corresponding to the ZOI
radii or ZOI shapes and radii (e.g. <code>"XXX"</code>).</p></dd>


<dt id="arg-cumulative">cumulative<a class="anchor" aria-label="anchor" href="#arg-cumulative"></a></dt>
<dd><p><code>[character=""]{"cumulative", "nearest"}</code> <br> Default is <code>""</code>.
String to be added to the ZOI terms
corresponding on whether the variable represents the ZOI of the nearest feature (<code>cumulative = "nearest"</code>)
or the cumulative ZOI (<code>cumulative = "cumulative"</code>). If <code>""</code> (default), the type of ZOI is taken from the
variable name, already given in the formula.</p></dd>


<dt id="arg-separator">separator<a class="anchor" aria-label="anchor" href="#arg-separator"></a></dt>
<dd><p><code>[character(1)="_"]</code> <br> Separator to be used between type and zoi_radius, when <code>type</code>
is provided. Default is <code>"_"</code>.</p></dd>


<dt id="arg-remove-term">remove_term<a class="anchor" aria-label="anchor" href="#arg-remove-term"></a></dt>
<dd><p><code>[character=""]</code> <br> Vector of characters with the names of the variables not to be
added to the formula. This should be used when some specific combinations of variables, shapes,
and radii are in principle created by the function but shouldbe ignored in the final
formula.</p></dd>


<dt id="arg-predictor-table">predictor_table<a class="anchor" aria-label="anchor" href="#arg-predictor-table"></a></dt>
<dd><p><code>[logical(1)=FALSE]</code> <br> logical. Whether or not a table should be returned
with info of all ZOI radii, shape values, and formula terms, together with info from other non-ZOI predictors.
This table is of special interest when fitting "Decay Adaptive Lasso" or other related models with
<code><a href="fit_net_functions.html">fit_net_logit()</a></code> or <code><a href="fit_net_functions.html">fit_net_clogit()</a></code> with argument <code>method = "DecayAdaptiveLasso"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with both the final <code>formula</code> with all ZOI radii and shapes and
a table with the predictor information (if <code>predictor_table = TRUE</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function searches for patterns in ZOI variables as stated in the <code>formula</code>
and replaces them by combinations of strings representing the type of ZOI
(nearest, cumulative), the shape (e.g. "exp", "linear"), and the multiple ZOI radii
to be assessed. The final name of the variables should match the names of the
columns in the data set.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># multiple radii</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="va">case_</span> <span class="op">~</span> <span class="fu">strata</span><span class="op">(</span><span class="va">step_id_</span><span class="op">)</span> <span class="op">+</span> <span class="va">sl_</span><span class="op">*</span><span class="va">startpt_roadsXXX</span> <span class="op">+</span> <span class="va">sl_</span><span class="op">*</span><span class="va">startpt_cabinsXXX</span></span></span>
<span class="r-in"><span><span class="fu">add_zoi_formula</span><span class="op">(</span><span class="va">f</span>, zoi_radius <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">2000</span>, <span class="fl">3000</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"XXX"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> case_ ~ strata(step_id_) + sl_ * startpt_roads1000 + sl_ * startpt_roads2000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads3000 + sl_ * startpt_cabins1000 + sl_ * </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     startpt_cabins2000 + sl_ * startpt_cabins3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x55f9dd6126c0&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $predictor_table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># multiple radii and shapes</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="va">case_</span> <span class="op">~</span> <span class="fu">strata</span><span class="op">(</span><span class="va">step_id_</span><span class="op">)</span> <span class="op">+</span> <span class="va">sl_</span><span class="op">*</span><span class="va">startpt_roadsXXX</span> <span class="op">+</span> <span class="va">sl_</span><span class="op">*</span><span class="va">startpt_cabinsXXX</span></span></span>
<span class="r-in"><span><span class="fu">add_zoi_formula</span><span class="op">(</span><span class="va">f</span>, zoi_radius <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">2000</span>, <span class="fl">3000</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"_exp_decay"</span>, pattern <span class="op">=</span> <span class="st">"XXX"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> case_ ~ strata(step_id_) + sl_ * startpt_roads_exp_decay_1000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads_exp_decay_2000 + sl_ * startpt_roads_exp_decay_3000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_exp_decay_1000 + sl_ * startpt_cabins_exp_decay_2000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_exp_decay_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x55f9dd6c5ae8&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $predictor_table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">add_zoi_formula</span><span class="op">(</span><span class="va">f</span>, zoi_radius <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">2000</span>, <span class="fl">3000</span><span class="op">)</span>, type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"_exp_decay"</span>, <span class="st">"_threshold"</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"XXX"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> case_ ~ strata(step_id_) + sl_ * startpt_roads_exp_decay_1000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads_exp_decay_2000 + sl_ * startpt_roads_exp_decay_3000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads_threshold_1000 + sl_ * startpt_roads_threshold_2000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads_threshold_3000 + sl_ * startpt_cabins_exp_decay_1000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_exp_decay_2000 + sl_ * startpt_cabins_exp_decay_3000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_threshold_1000 + sl_ * startpt_cabins_threshold_2000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_threshold_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x55f9dd729308&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $predictor_table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># predictor_table - adding only the nearest ZOI</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="va">case_</span> <span class="op">~</span> <span class="fu">strata</span><span class="op">(</span><span class="va">step_id_</span><span class="op">)</span> <span class="op">+</span> <span class="va">land_use</span> <span class="op">+</span> <span class="va">sl_</span><span class="op">*</span><span class="va">startpt_roads_XXX</span> <span class="op">+</span> <span class="va">sl_</span><span class="op">*</span><span class="va">startpt_cabins_XXX</span></span></span>
<span class="r-in"><span><span class="fu">add_zoi_formula</span><span class="op">(</span><span class="va">f</span>, zoi_radius <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">2000</span>, <span class="fl">3000</span><span class="op">)</span>, type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exp_decay"</span>, <span class="st">"threshold"</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"XXX"</span>,</span></span>
<span class="r-in"><span>                predictor_table <span class="op">=</span> <span class="cn">TRUE</span>, cumulative <span class="op">=</span> <span class="st">"nearest"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> case_ ~ strata(step_id_) + land_use + sl_ * startpt_roads_exp_decay_1000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads_exp_decay_2000 + sl_ * startpt_roads_exp_decay_3000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads_threshold_1000 + sl_ * startpt_roads_threshold_2000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads_threshold_3000 + sl_ * startpt_cabins_exp_decay_1000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_exp_decay_2000 + sl_ * startpt_cabins_exp_decay_3000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_threshold_1000 + sl_ * startpt_cabins_threshold_2000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_threshold_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x55f9dd7cf0d8&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $predictor_table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    is_zoi cumulative     shape zoi_radius              variable</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       0       &lt;NA&gt;      &lt;NA&gt;         NA              land_use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       1    nearest exp_decay       1000  sl_ * startpt_roads_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       1    nearest exp_decay       2000  sl_ * startpt_roads_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       1    nearest exp_decay       3000  sl_ * startpt_roads_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      1    nearest threshold       1000  sl_ * startpt_roads_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      1    nearest threshold       2000  sl_ * startpt_roads_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      1    nearest threshold       3000  sl_ * startpt_roads_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      1    nearest exp_decay       1000 sl_ * startpt_cabins_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      1    nearest exp_decay       2000 sl_ * startpt_cabins_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      1    nearest exp_decay       3000 sl_ * startpt_cabins_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16      1    nearest threshold       1000 sl_ * startpt_cabins_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17      1    nearest threshold       2000 sl_ * startpt_cabins_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18      1    nearest threshold       3000 sl_ * startpt_cabins_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                               term_zoi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                             land_use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   sl_ * startpt_roads_exp_decay_1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   sl_ * startpt_roads_exp_decay_2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   sl_ * startpt_roads_exp_decay_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  sl_ * startpt_roads_threshold_1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  sl_ * startpt_roads_threshold_2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12  sl_ * startpt_roads_threshold_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 sl_ * startpt_cabins_exp_decay_1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 sl_ * startpt_cabins_exp_decay_2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 sl_ * startpt_cabins_exp_decay_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 sl_ * startpt_cabins_threshold_1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 sl_ * startpt_cabins_threshold_2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 sl_ * startpt_cabins_threshold_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># predictor_table 2 - adding both nearest and cumulative ZOI</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="va">case_</span> <span class="op">~</span> <span class="fu">strata</span><span class="op">(</span><span class="va">step_id_</span><span class="op">)</span> <span class="op">+</span> <span class="va">sl_</span><span class="op">*</span><span class="va">startpt_roads_cumulative_XXX</span> <span class="op">+</span> <span class="va">sl_</span><span class="op">*</span><span class="va">startpt_cabins_nearest_XXX</span></span></span>
<span class="r-in"><span><span class="fu">add_zoi_formula</span><span class="op">(</span><span class="va">f</span>, zoi_radius <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">2000</span>, <span class="fl">3000</span><span class="op">)</span>, type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exp_decay"</span>, <span class="st">"threshold"</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"XXX"</span>,</span></span>
<span class="r-in"><span>                predictor_table <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> case_ ~ strata(step_id_) + sl_ * startpt_roads_cumulative_exp_decay_1000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads_cumulative_exp_decay_2000 + sl_ * startpt_roads_cumulative_exp_decay_3000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads_cumulative_threshold_1000 + sl_ * startpt_roads_cumulative_threshold_2000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads_cumulative_threshold_3000 + sl_ * startpt_cabins_nearest_exp_decay_1000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_nearest_exp_decay_2000 + sl_ * startpt_cabins_nearest_exp_decay_3000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_nearest_threshold_1000 + sl_ * startpt_cabins_nearest_threshold_2000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_nearest_threshold_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x55f9dd916060&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $predictor_table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    is_zoi cumulative     shape zoi_radius                        variable</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       1 cumulative exp_decay       1000 sl_ * startpt_roads_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       1 cumulative exp_decay       2000 sl_ * startpt_roads_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       1 cumulative exp_decay       3000 sl_ * startpt_roads_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       1 cumulative threshold       1000 sl_ * startpt_roads_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       1 cumulative threshold       2000 sl_ * startpt_roads_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       1 cumulative threshold       3000 sl_ * startpt_roads_cumulative_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       1    nearest exp_decay       1000   sl_ * startpt_cabins_nearest_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       1    nearest exp_decay       2000   sl_ * startpt_cabins_nearest_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       1    nearest exp_decay       3000   sl_ * startpt_cabins_nearest_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      1    nearest threshold       1000   sl_ * startpt_cabins_nearest_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      1    nearest threshold       2000   sl_ * startpt_cabins_nearest_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      1    nearest threshold       3000   sl_ * startpt_cabins_nearest_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                         term_zoi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  sl_ * startpt_roads_cumulative_exp_decay_1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  sl_ * startpt_roads_cumulative_exp_decay_2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  sl_ * startpt_roads_cumulative_exp_decay_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  sl_ * startpt_roads_cumulative_threshold_1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  sl_ * startpt_roads_cumulative_threshold_2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  sl_ * startpt_roads_cumulative_threshold_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    sl_ * startpt_cabins_nearest_exp_decay_1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    sl_ * startpt_cabins_nearest_exp_decay_2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    sl_ * startpt_cabins_nearest_exp_decay_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   sl_ * startpt_cabins_nearest_threshold_1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   sl_ * startpt_cabins_nearest_threshold_2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   sl_ * startpt_cabins_nearest_threshold_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># predictor_table 3 - adding the nearest/cumulative metric within the type argument</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="va">case_</span> <span class="op">~</span> <span class="fu">strata</span><span class="op">(</span><span class="va">step_id_</span><span class="op">)</span> <span class="op">+</span> <span class="va">sl_</span><span class="op">*</span><span class="va">startpt_roads_XXX</span> <span class="op">+</span> <span class="va">sl_</span><span class="op">*</span><span class="va">startpt_cabins_XXX</span></span></span>
<span class="r-in"><span><span class="fu">add_zoi_formula</span><span class="op">(</span><span class="va">f</span>, zoi_radius <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">2000</span>, <span class="fl">3000</span><span class="op">)</span>, type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nearest_exp_decay"</span>, <span class="st">"cumulative_exp_decay"</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"XXX"</span>,</span></span>
<span class="r-in"><span>                predictor_table <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> case_ ~ strata(step_id_) + sl_ * startpt_roads_nearest_exp_decay_1000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads_nearest_exp_decay_2000 + sl_ * startpt_roads_nearest_exp_decay_3000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads_cumulative_exp_decay_1000 + sl_ * startpt_roads_cumulative_exp_decay_2000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_roads_cumulative_exp_decay_3000 + sl_ * startpt_cabins_nearest_exp_decay_1000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_nearest_exp_decay_2000 + sl_ * startpt_cabins_nearest_exp_decay_3000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_cumulative_exp_decay_1000 + sl_ * startpt_cabins_cumulative_exp_decay_2000 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sl_ * startpt_cabins_cumulative_exp_decay_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x55f9dda6c308&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $predictor_table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    is_zoi cumulative     shape zoi_radius              variable</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       1    nearest exp_decay       1000  sl_ * startpt_roads_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       1    nearest exp_decay       2000  sl_ * startpt_roads_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       1    nearest exp_decay       3000  sl_ * startpt_roads_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       1 cumulative exp_decay       1000  sl_ * startpt_roads_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       1 cumulative exp_decay       2000  sl_ * startpt_roads_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       1 cumulative exp_decay       3000  sl_ * startpt_roads_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       1    nearest exp_decay       1000 sl_ * startpt_cabins_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       1    nearest exp_decay       2000 sl_ * startpt_cabins_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       1    nearest exp_decay       3000 sl_ * startpt_cabins_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      1 cumulative exp_decay       1000 sl_ * startpt_cabins_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      1 cumulative exp_decay       2000 sl_ * startpt_cabins_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      1 cumulative exp_decay       3000 sl_ * startpt_cabins_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                          term_zoi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      sl_ * startpt_roads_nearest_exp_decay_1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      sl_ * startpt_roads_nearest_exp_decay_2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      sl_ * startpt_roads_nearest_exp_decay_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   sl_ * startpt_roads_cumulative_exp_decay_1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   sl_ * startpt_roads_cumulative_exp_decay_2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   sl_ * startpt_roads_cumulative_exp_decay_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     sl_ * startpt_cabins_nearest_exp_decay_1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     sl_ * startpt_cabins_nearest_exp_decay_2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     sl_ * startpt_cabins_nearest_exp_decay_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 sl_ * startpt_cabins_cumulative_exp_decay_1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 sl_ * startpt_cabins_cumulative_exp_decay_2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 sl_ * startpt_cabins_cumulative_exp_decay_3000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bernardo Brandão Niebuhr, Manuela Panzacchi, Bram van Moorter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

